# 类和对象

> [官方教程- 初学者代码 - 类简介](https://learn.unity.com/tutorial/lei-jian-jie?uv=2020.3&projectId=5fad021eedbc2a00225e688f)  
> [菜鸟教程 - C# 类](https://www.runoob.com/csharp/csharp-class.html)

## 1. 类

“万物皆对象”，对象是程序中，对世间万物的模拟，而类就是对象的模板。

类 是最基本的 C# 类型。 类是一种数据结构，可在一个单元中就将状态（字段）和操作（方法和其他函数成员）结合起来。 类为类实例（亦称为“对象”）提供了定义 。 类支持 继承 和 多形性，即 派生类 可以扩展和专门针对 基类 的机制。

新类使用类声明进行创建。 类声明以标头开头。 标头指定以下内容：

- 类的特性和修饰符: 比如 public static abstract 等，可以有零个或多个
- 类的名称: 符合命名规则，Camel 命名法
- 基类（从基类继承时）: 如果有基类（父类），需要写上继承关系
- 接口由该类实现： 如果有接口，需写上继承关系
- 标头后面是类主体，由在分隔符 { 和 } 内编写的成员声明列表组成：
  - 数据成员:存储数据的变量
  - 成员方法：描述操作的函数

格式：

```C#
// 最简类定义格式
修饰符 class 类名
{
    //类体

    //数据成员：
    修饰符 数据类型 变量名;

    //成员方法:
    修饰符 返回值类型 函数名(参数列表){
        函数体

    }
}

```

## 2. 对象

类是对象的模板，对象是类的实现(实例)

类或结构定义就像一个蓝图，它指定了类型可以做什么。对象基本上是根据蓝图分配和配置的一块内存。一个程序可以创建许多同一个类的对象。对象也称为实例，它们可以存储在命名变量中，也可以存储在数组或集合中。客户端代码是使用这些变量来调用方法和访问对象的公共属性的代码。在面向对象的语言（如 C#）中，典型的程序由多个动态交互的对象组成。

对象的操作：

```C#
//1. 创建 对象
类名 对象名 = new 类构造方法(参数列表);

// 2. 使用对象的数据成员
// 赋值
对象名.数据变量名 = 值;
// 取值
var 变量 =  对象名.数据变量名

// 3. 调用对象的方法成员（函数）
对象名.成员方法(实参列表);
```

## 3. 构造方法（构造函数）

用来实例化类的特殊函数，方法名和类名必须完全相同，每个类必须有一个，没有的话，系统会自动为我们创建一个无参数空的构造方法

但是，如果我们自己定义了带参数的构造方法，系统就不会再自动为我们生成不带参的空构造方法了，如果我们需要用到不带参的空构造方法，就需要自己添加

## 4. unity 组件类运行机制

除了静态类，所有 C# 中的类都需要实例化后才能使用，即必须创建类对象，才会在内存中被程序正确使用。

所以我们定义的任何 继承自 MonoBehaviour 的组件类，都会自动被创建为实例后，才会被加载到我们的游戏中，参与代码执行。

unity 会自动生成我们定义的组件类的空构造方法，用该方法创建处对象，然后根据 inspector 中的组件配置，将组件对象加载到对应的游戏对象中，执行相关组件操作。

## 5. this

指代当前类对象，一般用在类的方法体中

## 6. 自定义类在 inspector 中显示

需要为自定义的类，添加 [System.Serializable]，如果自定义的类代码，和当前组件并不在同一个代码文件中，还需要给每个想要在 inspector 中显示的属性，加上 [UnityEngine.SerializeField]

## 7. 命名空间 namespace

类似于 java 中的 包(package)，是为了更好的规划类库，避免类命名冲突

比如，两个班，每个班都有个张三，如果加上班级名称，两个同名的张三就很容易被区分开了————一班.张三 / 二班.张三；在这里，班级名就相当于 “命名空间”

命名空间可以有多层，每层在物理结构上，就对应一层文件夹

## 8. C# 特性 Attribate

下面部分暂时只做了解：

特性（Attribute）是用于在运行时传递程序中各种元素（比如类、方法、结构、枚举、组件等）的行为信息的声明性标签。您可以通过使用特性向程序添加声明性信息。一个声明性标签是通过放置在它所应用的元素前面的方括号（[ ]）来描述的。

特性（Attribute）用于添加元数据，如编译器指令和注释、描述、方法、类等其他信息。.Net 框架提供了两种类型的特性：预定义特性和自定义特性。

Attribute 类将预定义的系统信息或用户定义的自定义信息与目标元素相关联。 目标元素可以是程序集、类、构造函数、委托、枚举、事件、字段、接口、方法、可移植可执行文件模块、参数、属性、返回值、结构或其他特性。特性在您编译代码时被发送到元数据中，并可通过运行时反射服务用于公共语言运行时以及任何自定义工具或应用程序。通俗地理解可以这么表述：你可以通过 Attribute 将一些额外信息加在一些目标元素上（类，字段，接口等），程序编译的时候就将这些额外的信息系列化程序集的元数据中，当你运行程序的时候可以通过反射技术从程序集元数据中读取这些额外信息，并根据这些额外信息决定你程序的行为。

> 参考资料：

> - [unity 序列化](https://www.cnblogs.com/zhaoqingqing/p/3995304.html)

<br>

<hr>
<br>

配套视频教程：
[https://space.bilibili.com/43644141/channel/seriesdetail?sid=299912](https://space.bilibili.com/43644141/channel/seriesdetail?sid=299912)

文章也同时同步微信公众号，喜欢使用手机观看文章的可以关注

![](../../imgs/微信公众号二维码.jpg)
