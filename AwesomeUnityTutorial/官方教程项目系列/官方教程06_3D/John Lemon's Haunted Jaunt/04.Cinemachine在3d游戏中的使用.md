# Cinemachine 在 3D 游戏中的使用

## 1. 概念

Cinemachine 是一套用于操作 Unity 摄像机的模块。Cinemachine 解决了跟踪目标、合成、混合和镜头之间剪切的复杂数学和逻辑。它旨在显着减少开发过程中发生的耗时的手动操作和脚本修订的数量。

这些模块的程序性质使 Cinemachine 具有抗错误性。当您进行调整（例如，更改场景中的动画、车辆速度、地形或其他游戏对象）时，Cinemachine 会动态调整其行为以制作最佳镜头。例如，没有必要仅仅因为角色向左转而不是向右转而重新编写相机脚本。

Cinemachine 可在所有类型（包括 FPS、第三人称、2D、横向卷轴、自上而下和 RTS）中实时运行。它可以根据需要在场景中支持任意数量的镜头。其模块化系统可让您组合复杂的行为。

Cinemachine 与其他 Unity 工具配合良好，可作为时间轴、动画和后处理资产的强大补充。创建您自己的扩展或将其与您的自定义相机脚本集成。

## 2. Cinemachine 的虚拟摄像机

Cinemachine 不会创建新的摄像机。相反，它会引导单个 Unity 相机进行多次拍摄。您可以使用虚拟相机构图这些镜头。虚拟相机移动和旋转 Unity 相机并控制其设置。

虚拟摄像机是独立于 Unity 摄像机的独立游戏对象，并独立运行。它们不相互嵌套。

虚拟摄像机为您完成的主要任务：

- 在场景中定位 Unity 相机。
- 将 Unity 相机对准某物。
- 向 Unity 相机添加程序噪声。噪声模拟诸如手持效果或车辆抖动之类的东西。
  <br>

Cinemachine 鼓励您创建许多虚拟摄像机。虚拟相机旨在消耗很少的处理能力。如果您的场景对性能很敏感，请在任何给定时刻停用除基本虚拟摄像机以外的所有摄像机以获得最佳性能。

建议您使用单个虚拟摄像机进行单次拍摄。利用这一点来创建戏剧性或微妙的切割或混合

## 3. Cinemachine Brain

如其名称，是操纵所有虚拟的 Cinemachine 摄像机的大脑。

使用 Cinemachine Brain 实时响应动态游戏事件。它允许您的游戏逻辑通过操纵优先级来控制相机（自动）。

也可以手动使用时间轴在可预测的情况下编排摄像机，例如过场动画。

## 4. 移动和瞄准

使用 Virtual Camera 中的 Body 属性指定如何在场景中移动它。使用 Aim 属性指定如何旋转它。

虚拟摄像机有两个目标：

- 该跟踪目标指定虚拟相机与移动游戏物体。
- 在查找在目标指定游戏对象瞄准。

Cinemachine 包括各种程序算法来控制移动和瞄准。每个算法都解决一个特定的问题，并具有根据您的特定需求自定义算法的属性。Cinemachine 将这些算法实现为 CinemachineComponent 对象。使用 CinemachineComponent 该类来实现自定义移动或瞄准行为。

## 5. Cinemachine 使用简介

- 在场景中创建一个或多个“虚拟”摄像机。
- 使用 Follow 属性指定要跟随的 GameObject；使用 Look At 属性指定虚拟相机应该瞄准的游戏对象。
- 这些虚拟摄像机由一个名为 Cinemachine Brain 的组件进行管理。
- Cinemachine Brain 与 Camera 组件连接到相同的游戏对象，默认情况下，这个游戏对象将是 Main Camera 游戏对象。
- Cinemachine Brain 管理所有虚拟摄像机，并确定实际摄像机应跟随哪个虚拟摄像机（或虚拟摄像机的组合）

<br>
<hr>
<br>

配套视频教程：
[https://space.bilibili.com/43644141/channel/seriesdetail?sid=299912](https://space.bilibili.com/43644141/channel/seriesdetail?sid=299912)

文章也同时同步微信公众号，喜欢使用手机观看文章的可以关注

![](../../imgs/微信公众号二维码.jpg)
