# C#高级编程之——匿名对象

## 匿名对象

背景：在一个较大的程序程序中，只有一处或很少几处（不超过3处）需要用到 某个或某些类型（如上 Student），其他地方不再需要这些类型。单独声明一个Student类型，所需代码量，可能超过使用该类型时的代码量，投入产出比不划算。

概念：在C#中，匿名对象是指没有显式类型声明的对象实例。这些对象通常使用new关键字和初始化器语法创建，并可以包含一组属性和值。这在需要临时传递信息或进行一些本地操作时非常有用。注意，在创建匿名对象之后，我们不能添加或移除属性，一旦创建，它的属性和值就固定下来了。

特点：

1. **简洁性**：匿名对象允许在不定义具体类型的情况下，直接使用对象初始化的方式创建对象。这种方式减少了代码的复杂性，使代码更加简洁明了。例如，可以使用`var person = new { Name = "Alice", Age = 30 };`来创建一个包含Name和Age属性的匿名对象。
2. **方便性**：匿名对象通常用于临时存储数据或者作为方法的返回值，避免了定义繁琐的数据结构。这在处理临时数据或作为中间结果传递时非常方便。
3. **高效性**：通过使用匿名对象，可以减少不必要的代码量，提高代码的可读性和维护性。它提供了一种快速且方便的方式来处理临时数据，而无需创建额外的类。
4. **私有性**：匿名对象默认是私有的，只能在当前方法或作用域内使用。这有助于保护数据的封装性，防止外部代码直接访问或修改这些对象。
5. **自动属性**：匿名对象的属性是自动实现的，编译器会自动为每个属性生成get和set方法（尽管这些属性通常是只读的）。这使得开发者无需手动编写属性访问器代码。
6. **强类型检查**：虽然匿名对象没有明确的类型名称，但编译器会根据属性的名称和类型进行类型推断。这意味着代码仍然具有强类型检查的好处，可以在编译时捕获类型错误。

示例：

```csharp
static void Main(string[] args)
{
     var x = new { Name = "张三", Age = 20, Like = "LOL" };
}
```

```csharp
/// <summary>
/// 匿名对象
/// </summary>
[Test]
public void TestObject()
{
    // 匿名对象：没有名称的对象
    var x = new { Name = "流萤", Age = 20, Like = "机甲" };
    var y = new { Name = "青雀", Age = 18, Like = "摸鱼" };

    // 在当前的作用域下可访问
    Console.WriteLine($"Name;{x.Name},Age:{x.Age},Like:{x.Like}");
    Console.WriteLine($"Name;{y.Name},Age:{y.Age},Like:{y.Like}");
}
```
