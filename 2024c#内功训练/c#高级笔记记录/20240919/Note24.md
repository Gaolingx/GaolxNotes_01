# C#高级编程之——泛型（五）泛型协变和逆变

## 七、逆变

在上个教程中，我们通过协变的方式实现了 TestClass02<Person> person2 = new TestClass02<Student>(); 这样的操作，但如果反过来，让TestClass02<Student> person2 = new TestClass02<Person>(); 即泛型子类实例化泛型父类显然是不行的，因此这里需要实现逆变。

7.1 **定义：逆变（Contravariance）**
逆变与协变相反，它允许将基类类型的对象赋值给派生类型的对象，但这是在泛型接口或委托的参数类型上实现的。换句话说，如果泛型接口或委托的参数类型是逆变的，那么你可以将一个接受基类类型参数的接口或委托赋值给一个接受派生类型参数的接口或委托。

总结：

1. 在C#中，通过在泛型接口或委托的返回类型前添加out关键字来标记协变。通过在泛型接口或委托的参数类型前添加in关键字来标记逆变。
2. 协变(Convariant)和逆变(Contravariant)的出现，使数组、委托、泛型类型的隐式转换变得可能。 子类转换成基类，称之为协变；基类转换成子类，称之为逆变。.NET4.0以来，支持了泛型接口的协变和逆变。
