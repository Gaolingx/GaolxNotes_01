# Stable Diffusion UNetç»“æž„è¯¦è§£

### ðŸ§‘â€ðŸ’» User

stable diffusionæ¨¡åž‹çš„unetç»“æž„æ˜¯æ€Žä¹ˆæ ·çš„ï¼Ÿ

---

### ðŸ¤– Assistant

Stable Diffusion æ¨¡åž‹çš„æ ¸å¿ƒæ˜¯å®ƒçš„ **UNet æž¶æž„**ã€‚è¿™ä¸ª UNet å¹¶ä¸æ˜¯ä¼ ç»Ÿå›¾åƒåˆ†å‰²ä¸­çš„åŽŸå§‹ UNetï¼Œè€Œæ˜¯ä¸€ä¸ªç»è¿‡**æ·±åº¦ä¿®æ”¹å’Œæ‰©å±•**çš„ç‰ˆæœ¬ï¼Œä¸“é—¨è®¾è®¡ç”¨äºŽåœ¨**æ½œç©ºé—´**ä¸­è¿›è¡Œ**æ‰©æ•£è¿‡ç¨‹**çš„**å™ªå£°é¢„æµ‹**ä»»åŠ¡ã€‚

ä»¥ä¸‹æ˜¯ Stable Diffusion UNet çš„ä¸»è¦ç»“æž„å’Œå…³é”®ç‰¹ç‚¹ï¼š

1.  **æ ¸å¿ƒä»»åŠ¡**ï¼š
    *   è¾“å…¥ï¼šä¸€ä¸ªå¸¦å™ªå£°çš„**æ½œç©ºé—´è¡¨ç¤º**ï¼ˆ`latent`ï¼Œé€šå¸¸æ˜¯ 64x64 æˆ– 96x96 ç­‰è¾ƒå°åˆ†è¾¨çŽ‡ï¼‰ï¼Œä»¥åŠå¯¹åº”çš„**æ—¶é—´æ­¥**ï¼ˆ`timestep t`ï¼‰å’Œ**æ–‡æœ¬åµŒå…¥**ï¼ˆ`text_embeddings`ï¼‰ã€‚
    *   è¾“å‡ºï¼šé¢„æµ‹çš„**å™ªå£°**ï¼ˆ`predicted noise`ï¼‰ï¼Œè¿™ä¸ªå™ªå£°éœ€è¦ä»Žè¾“å…¥ä¸­å‡åŽ»ä»¥é€æ­¥åŽ»å™ªã€‚

2.  **æ•´ä½“æž¶æž„ï¼šç¼–ç å™¨-è§£ç å™¨ + è·³è·ƒè¿žæŽ¥**ï¼š
    *   éµå¾ªç»å…¸çš„ UNet èŒƒå¼ï¼ŒåŒ…å«ä¸€ä¸ª**ä¸‹é‡‡æ ·è·¯å¾„ï¼ˆç¼–ç å™¨ï¼‰** å’Œä¸€ä¸ª**ä¸Šé‡‡æ ·è·¯å¾„ï¼ˆè§£ç å™¨ï¼‰**ã€‚
    *   åœ¨ç¼–ç å™¨å’Œè§£ç å™¨çš„**ç›¸åŒåˆ†è¾¨çŽ‡å±‚çº§**ä¹‹é—´ï¼Œå­˜åœ¨å¤§é‡çš„**è·³è·ƒè¿žæŽ¥**ã€‚è¿™äº›è¿žæŽ¥å°†ç¼–ç å™¨æå–çš„ç»†èŠ‚ä¿¡æ¯ç›´æŽ¥ä¼ é€’åˆ°è§£ç å™¨ï¼Œå¸®åŠ©è§£ç å™¨åœ¨é‡å»ºåŽ»å™ªå›¾åƒæ—¶æ¢å¤ç²¾ç»†ç»“æž„ã€‚

3.  **åŸºç¡€æž„å»ºå—ï¼šæ®‹å·®å—**ï¼š
    *   UNet ä¸»è¦ç”±å¤šä¸ª**æ®‹å·®å—**å †å è€Œæˆã€‚è¿™æ˜¯çŽ°ä»£æ·±åº¦ç¥žç»ç½‘ç»œçš„æ ¸å¿ƒç»„ä»¶ï¼Œæœ‰åŠ©äºŽè®­ç»ƒæ›´æ·±çš„ç½‘ç»œã€‚
    *   æ¯ä¸ªæ®‹å·®å—é€šå¸¸åŒ…å«ï¼š
        *   å·ç§¯å±‚ï¼ˆé€šå¸¸æ˜¯ 3x3 å·ç§¯ï¼‰
        *   å½’ä¸€åŒ–å±‚ï¼ˆé€šå¸¸æ˜¯ `GroupNorm` æˆ– `LayerNorm`ï¼Œå› ä¸º `BatchNorm` åœ¨æ‰©æ•£æ¨¡åž‹ä¸­æ•ˆæžœä¸ä½³ï¼‰
        *   æ¿€æ´»å‡½æ•°ï¼ˆé€šå¸¸æ˜¯ `SiLU` æˆ– `Swish`ï¼‰
        *   å¯é€‰çš„**è‡ªæ³¨æ„åŠ›**æˆ–**äº¤å‰æ³¨æ„åŠ›**å±‚ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚
        *   æ®‹å·®è¿žæŽ¥ï¼šå°†å—çš„è¾“å…¥ç›´æŽ¥åŠ åˆ°è¾“å‡ºä¸Šã€‚

4.  **å…³é”®åˆ›æ–°ï¼šæ¡ä»¶æ³¨å…¥ - æ—¶é—´æ­¥å’Œæ–‡æœ¬**ï¼š
    *   **æ—¶é—´æ­¥åµŒå…¥**ï¼š
        *   æ‰©æ•£è¿‡ç¨‹çš„æ—¶é—´æ­¥ `t` è‡³å…³é‡è¦ï¼Œå®ƒå†³å®šäº†å½“å‰å™ªå£°çš„å¼ºåº¦ã€‚
        *   `t` è¢«ç¼–ç ä¸ºä¸€ä¸ªé«˜ç»´å‘é‡ï¼ˆé€šå¸¸ä½¿ç”¨æ­£å¼¦/ä½™å¼¦ä½ç½®ç¼–ç æˆ–å­¦ä¹ åµŒå…¥ï¼‰ã€‚
        *   è¿™ä¸ªæ—¶é—´åµŒå…¥å‘é‡é€šå¸¸é€šè¿‡**åŠ æ³•**æˆ–**ä»¿å°„å˜æ¢**æ³¨å…¥åˆ°**æ¯ä¸ªæ®‹å·®å—**ä¸­ï¼ˆä¾‹å¦‚ï¼Œåœ¨å½’ä¸€åŒ–å±‚ä¹‹åŽï¼Œé€šè¿‡ä¸€ä¸ªå°çš„ MLP è°ƒæ•´ç‰¹å¾å›¾çš„ç¼©æ”¾å› å­ `scale` å’Œåç½® `shift`ï¼‰ã€‚
    *   **æ–‡æœ¬æ¡ä»¶åµŒå…¥ï¼ˆäº¤å‰æ³¨æ„åŠ›ï¼‰**ï¼š
        *   Stable Diffusion æ˜¯**æ–‡æœ¬åˆ°å›¾åƒ**æ¨¡åž‹ï¼Œæ–‡æœ¬æç¤ºé€šè¿‡**äº¤å‰æ³¨æ„åŠ›æœºåˆ¶**æ³¨å…¥åˆ° UNet ä¸­ã€‚
        *   æ–‡æœ¬æç¤ºè¢«ä¸€ä¸ªæ–‡æœ¬ç¼–ç å™¨ï¼ˆå¦‚ CLIP çš„æ–‡æœ¬ç¼–ç å™¨ï¼‰è½¬æ¢ä¸ºä¸€ç»„åµŒå…¥å‘é‡ `text_embeddings`ã€‚
        *   åœ¨ UNet çš„**ç‰¹å®šå±‚ï¼ˆé€šå¸¸æ˜¯æ¯ä¸ªä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·å±‚ä¹‹åŽï¼‰** çš„æ®‹å·®å—ä¸­ï¼Œä¼šåŠ å…¥ä¸€ä¸ª**äº¤å‰æ³¨æ„åŠ›å±‚**ã€‚
        *   åœ¨è¿™ä¸ªæ³¨æ„åŠ›å±‚ä¸­ï¼š
            *   `Query` æ¥è‡ªå½“å‰ UNet å±‚çš„å›¾åƒç‰¹å¾ã€‚
            *   `Key` å’Œ `Value` æ¥è‡ªæ–‡æœ¬åµŒå…¥å‘é‡ `text_embeddings`ã€‚
        *   æ³¨æ„åŠ›æœºåˆ¶è®¡ç®—å›¾åƒç‰¹å¾ï¼ˆ`Query`ï¼‰å’Œæ–‡æœ¬ç‰¹å¾ï¼ˆ`Key`ï¼‰ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œå¹¶ç”¨æ–‡æœ¬ä¿¡æ¯ï¼ˆ`Value`ï¼‰åŠ æƒæ±‚å’Œæ¥è°ƒåˆ¶å›¾åƒç‰¹å¾ã€‚è¿™å…è®¸æ¨¡åž‹æ ¹æ®æ–‡æœ¬æè¿°æ¥æŒ‡å¯¼åŽ»å™ªè¿‡ç¨‹ã€‚

5.  **ä¸‹é‡‡æ ·è·¯å¾„ï¼ˆç¼–ç å™¨ï¼‰**ï¼š
    *   ç”±å¤šä¸ª**ä¸‹é‡‡æ ·é˜¶æ®µ**ç»„æˆã€‚
    *   æ¯ä¸ªé˜¶æ®µé€šå¸¸åŒ…å«ï¼š
        *   è‹¥å¹²ä¸ª**æ®‹å·®å—**ï¼ˆåŒ…å«æ—¶é—´åµŒå…¥æ³¨å…¥ï¼Œå¯èƒ½åŒ…å«è‡ª/äº¤å‰æ³¨æ„åŠ›ï¼‰ã€‚
        *   ä¸€ä¸ª**ä¸‹é‡‡æ ·å±‚**ï¼šé€šå¸¸ä½¿ç”¨ **æ­¥é•¿ä¸º 2 çš„å·ç§¯**ï¼ˆ`Conv2d with stride=2`ï¼‰æˆ– **æœ€å¤§/å¹³å‡æ± åŒ–**æ¥å°†ç©ºé—´åˆ†è¾¨çŽ‡å‡åŠï¼ŒåŒæ—¶å¢žåŠ é€šé“æ•°ï¼ˆç‰¹å¾æ·±åº¦ï¼‰ã€‚ä¸‹é‡‡æ ·æ“ä½œå°†ç‰¹å¾å›¾å°ºå¯¸ç¼©å°ï¼ˆå¦‚ 64x64 -> 32x32 -> 16x16 -> 8x8 -> 4x4ï¼‰ï¼ŒåŒæ—¶é€šé“æ•°å¢žåŠ ï¼ˆå¦‚ 128 -> 256 -> 512 -> 768 -> 1024ï¼‰ã€‚

6.  **ä¸Šé‡‡æ ·è·¯å¾„ï¼ˆè§£ç å™¨ï¼‰**ï¼š
    *   ç”±å¤šä¸ª**ä¸Šé‡‡æ ·é˜¶æ®µ**ç»„æˆï¼Œç»“æž„ä¸Žç¼–ç å™¨å¤§è‡´å¯¹ç§°ã€‚
    *   æ¯ä¸ªé˜¶æ®µé€šå¸¸åŒ…å«ï¼š
        *   è‹¥å¹²ä¸ª**æ®‹å·®å—**ï¼ˆåŒ…å«æ—¶é—´åµŒå…¥æ³¨å…¥ï¼Œå¯èƒ½åŒ…å«è‡ª/äº¤å‰æ³¨æ„åŠ›ï¼‰ã€‚
        *   ä¸€ä¸ª**ä¸Šé‡‡æ ·å±‚**ï¼šé€šå¸¸ä½¿ç”¨**è½¬ç½®å·ç§¯**æˆ–ç®€å•çš„**æœ€è¿‘é‚»/åŒçº¿æ€§ä¸Šé‡‡æ ·**åŽæŽ¥ä¸€ä¸ªå·ç§¯å±‚ï¼Œå°†ç©ºé—´åˆ†è¾¨çŽ‡åŠ å€ï¼ŒåŒæ—¶å‡å°‘é€šé“æ•°ï¼ˆå¦‚ 4x4 -> 8x8 -> 16x16 -> 32x32 -> 64x64ï¼Œé€šé“ 1024 -> 768 -> 512 -> 256 -> 128ï¼‰ã€‚
        *   **è·³è·ƒè¿žæŽ¥**ï¼šå°†**ç¼–ç å™¨**ä¸­**ç›¸åŒåˆ†è¾¨çŽ‡å±‚çº§**çš„ç‰¹å¾å›¾é€šè¿‡è¿žæŽ¥ï¼ˆ`concatenation`ï¼‰æˆ–åŠ æ³•ï¼ˆ`addition`ï¼‰çš„æ–¹å¼èžåˆåˆ°è§£ç å™¨çš„è¾“å…¥ä¸­ã€‚è¿™æ˜¯æ¢å¤ç»†èŠ‚çš„å…³é”®ã€‚

7.  **ç“¶é¢ˆå±‚**ï¼š
    *   ä½äºŽç¼–ç å™¨æœ«ç«¯ï¼ˆæœ€ä½Žåˆ†è¾¨çŽ‡ï¼‰å’Œè§£ç å™¨å¼€å§‹ä¹‹é—´ã€‚
    *   é€šå¸¸ç”±å‡ ä¸ª**æ®‹å·®å—**ç»„æˆï¼Œå¤„ç†æœ€æŠ½è±¡çš„ç‰¹å¾è¡¨ç¤ºã€‚è¿™äº›å—ä¹Ÿä¼šæŽ¥æ”¶æ—¶é—´æ­¥å’Œæ–‡æœ¬ä¿¡æ¯ã€‚

8.  **è¾“å‡ºå±‚**ï¼š
    *   åœ¨è§£ç å™¨æœ«ç«¯ï¼ˆæœ€é«˜åˆ†è¾¨çŽ‡ï¼Œä¸Žè¾“å…¥åˆ†è¾¨çŽ‡ç›¸åŒï¼‰ï¼Œé€šå¸¸ç”±ä¸€ä¸ªæˆ–å‡ ä¸ªå·ç§¯å±‚ç»„æˆï¼ˆæœ‰æ—¶ä¹ŸåŒ…å«æ®‹å·®å—ï¼‰ã€‚
    *   æœ€ç»ˆçš„å·ç§¯å±‚ï¼ˆé€šå¸¸æ˜¯ 3x3 Convï¼‰å°†é€šé“æ•°æ˜ å°„åˆ°ä¸Žè¾“å…¥å™ªå£°ç›¸åŒçš„ç»´åº¦ï¼ˆé€šå¸¸æ˜¯ 4 æˆ– 8 ä¸ªé€šé“ï¼Œå¯¹åº”æ½œç©ºé—´çš„ç»´åº¦ï¼‰ï¼Œè¾“å‡ºé¢„æµ‹çš„å™ªå£°ã€‚

9.  **è‡ªæ³¨æ„åŠ›**ï¼š
    *   é™¤äº†äº¤å‰æ³¨æ„åŠ›ï¼Œåœ¨ UNet çš„æŸäº›å±‚ï¼ˆå°¤å…¶æ˜¯åœ¨ç“¶é¢ˆå±‚æˆ–è¾ƒä½Žåˆ†è¾¨çŽ‡å±‚ï¼‰è¿˜ä¼šåŠ å…¥**è‡ªæ³¨æ„åŠ›å±‚**ã€‚
    *   è‡ªæ³¨æ„åŠ›è®©æ¨¡åž‹èƒ½å¤Ÿåœ¨**ç©ºé—´ç»´åº¦**ä¸Šå…³æ³¨å›¾åƒç‰¹å¾çš„ä¸åŒéƒ¨åˆ†ï¼Œæœ‰åŠ©äºŽå»ºæ¨¡å›¾åƒå†…éƒ¨çš„é•¿æœŸä¾èµ–å…³ç³»å’Œå…¨å±€ç»“æž„ã€‚

**æ€»ç»“ Stable Diffusion UNet çš„å…³é”®ç‰¹ç‚¹ï¼š**

*   **åœ¨æ½œç©ºé—´æ“ä½œ**ï¼šè¾“å…¥è¾“å‡ºéƒ½æ˜¯ä½Žç»´æ½œå‘é‡ï¼ˆå¦‚ 64x64x4ï¼‰ï¼Œæžå¤§é™ä½Žäº†è®¡ç®—é‡ã€‚
*   **æ·±åº¦æ¡ä»¶ UNet**ï¼šæ ¸å¿ƒæ˜¯åŸºäºŽæ®‹å·®å—çš„ç¼–ç å™¨-è§£ç å™¨ç»“æž„ã€‚
*   **æ—¶é—´æ­¥æ³¨å…¥**ï¼šé€šè¿‡æ¯ä¸ªæ®‹å·®å—è°ƒåˆ¶ç½‘ç»œè¡Œä¸ºã€‚
*   **æ–‡æœ¬æ¡ä»¶æ³¨å…¥**ï¼šé€šè¿‡äº¤å‰æ³¨æ„åŠ›æœºåˆ¶ï¼Œåœ¨ç‰¹å®šå±‚å°†æ–‡æœ¬è¯­ä¹‰ä¿¡æ¯èžå…¥å›¾åƒç‰¹å¾ã€‚
*   **è·³è·ƒè¿žæŽ¥**ï¼šè¿žæŽ¥ç¼–ç å™¨å’Œè§£ç å™¨ï¼Œä¿ç•™ç©ºé—´ç»†èŠ‚ã€‚
*   **æ³¨æ„åŠ›æœºåˆ¶**ï¼šåŒ…å«äº¤å‰æ³¨æ„åŠ›ï¼ˆæ–‡æœ¬-å›¾åƒï¼‰å’Œè‡ªæ³¨æ„åŠ›ï¼ˆå›¾åƒå†…éƒ¨ï¼‰ã€‚
*   **é¢„æµ‹å™ªå£°**ï¼šç½‘ç»œç›®æ ‡æ˜¯é¢„æµ‹æ·»åŠ åˆ°æ½œå˜é‡ä¸Šçš„å™ªå£°ã€‚

è¿™ä¸ªå¤æ‚çš„ã€æ·±åº¦æ¡ä»¶åŒ–çš„ UNet ç»“æž„ä½¿å¾— Stable Diffusion èƒ½å¤Ÿæ ¹æ®æ–‡æœ¬æè¿°ï¼Œåœ¨æ½œç©ºé—´ä¸­ä¸€æ­¥æ­¥ç²¾ç¡®åœ°åŽ»é™¤å™ªå£°ï¼Œæœ€ç»ˆç”Ÿæˆé«˜è´¨é‡çš„å›¾åƒã€‚å®ƒæ˜¯æ•´ä¸ªæ¨¡åž‹ç”Ÿæˆèƒ½åŠ›çš„æ ¸å¿ƒå¼•æ“Žã€‚

---

### ðŸ§‘â€ðŸ’» User

stable diffusion 1.x/2.xæ¨¡åž‹çš„vitåœ¨ç»å…¸çš„å·ç§¯unetåŸºç¡€ä¸Šè¿›è¡Œäº†å“ªäº›æ”¹è¿›ï¼Œå“ªäº›éƒ¨åˆ†è¢«æ›¿æ¢æˆäº†transformerå—ï¼Œèƒ½ä¸èƒ½ç”»è‰å›¾è¯´æ˜Žï¼Ÿ

---

### ðŸ¤– Assistant

å¥½çš„ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†æ‹†è§£ Stable Diffusion (SD) 1.x/2.x æ¨¡åž‹æ˜¯å¦‚ä½•åœ¨ç»å…¸å·ç§¯ UNet åŸºç¡€ä¸Šï¼Œé€šè¿‡èžå…¥ **Vision Transformer (ViT)** çš„æ€æƒ³ï¼ˆæ›´å‡†ç¡®åœ°è¯´ï¼Œæ˜¯ **Transformer å—**ï¼‰è¿›è¡Œæ”¹è¿›çš„ï¼Œä»¥åŠå“ªäº›éƒ¨åˆ†è¢«æ›¿æ¢äº†ã€‚æ ¸å¿ƒæ”¹è¿›åœ¨äºŽå¼•å…¥äº† **æ³¨æ„åŠ›æœºåˆ¶ï¼ˆç‰¹åˆ«æ˜¯äº¤å‰æ³¨æ„åŠ›ï¼‰** æ¥å¤„ç†æ–‡æœ¬æ¡ä»¶ä¿¡æ¯ã€‚

**æ ¸å¿ƒæ”¹è¿›ï¼šç”¨ Transformer å—ï¼ˆæ³¨æ„åŠ›æœºåˆ¶ï¼‰å¢žå¼ºæ¡ä»¶æŽ§åˆ¶**

SD çš„ UNet **ä¸æ˜¯**ç›´æŽ¥ç”¨ ViT æ›¿æ¢äº†æ•´ä¸ª CNNï¼Œè€Œæ˜¯ **åœ¨åŽŸæœ‰çš„å·ç§¯æ®‹å·®å—ç»“æž„ä¸­ï¼Œç­–ç•¥æ€§åœ°æ’å…¥ Transformer å—ï¼ˆä¸»è¦åŒ…å«è‡ªæ³¨æ„åŠ›å’Œäº¤å‰æ³¨æ„åŠ›å±‚ï¼‰**ã€‚è¿™äº›å—è´Ÿè´£å°† **æ–‡æœ¬åµŒå…¥ (Text Embeddings)** å’Œ **æ—¶é—´æ­¥åµŒå…¥ (Timestep Embedding)** æœ‰æ•ˆåœ°æ³¨å…¥åˆ°å›¾åƒç‰¹å¾ä¸­ã€‚

**å“ªäº›éƒ¨åˆ†è¢«æ›¿æ¢/ä¿®æ”¹æˆäº† Transformer å—ï¼Ÿ**

1.  **æ®‹å·®å—å†…éƒ¨çš„æ”¹é€  (æ ¸å¿ƒå˜åŒ–ï¼):**
    *   **ç»å…¸ CNN UNet æ®‹å·®å—ï¼š** é€šå¸¸æ˜¯ `Conv -> Norm (e.g., GroupNorm) -> Activation (e.g., SiLU)`ï¼Œå¯èƒ½ä¸²è”å¤šä¸ªè¿™æ ·çš„ç»„åˆï¼Œæœ€åŽåŠ æ®‹å·®è¿žæŽ¥ã€‚ä¸»è¦ç”¨äºŽç©ºé—´ç‰¹å¾æå–ã€‚
    *   **SD UNet çš„â€œæ¡ä»¶åŒ–â€æ®‹å·®å—ï¼š** åœ¨åŽŸæœ‰å·ç§¯æ“ä½œçš„åŸºç¡€ä¸Šï¼Œ**æ’å…¥ Transformer å±‚**ã€‚ä¸€ä¸ªå…¸åž‹çš„ SD æ®‹å·®å—ç»“æž„é¡ºåºå¦‚ä¸‹ï¼š
        1.  **å·ç§¯å±‚ (å¯é€‰)ï¼š** åˆå§‹ç‰¹å¾å˜æ¢ã€‚
        2.  **GroupNormï¼š** å½’ä¸€åŒ–ã€‚
        3.  **SiLU æ¿€æ´»ï¼š** éžçº¿æ€§å˜æ¢ã€‚
        4.  **æ—¶é—´æ­¥æ³¨å…¥ï¼š** *æ—¶é—´æ­¥åµŒå…¥ `t` é€šè¿‡ä¸€ä¸ªå°åž‹ MLPï¼ˆé€šå¸¸æ˜¯å…¨è¿žæŽ¥å±‚ï¼‰ç”Ÿæˆç¼©æ”¾å› å­ `scale` å’Œåç§»å› å­ `shift`ã€‚è¿™äº›å› å­ä½œç”¨äºŽä¸Šä¸€æ­¥å½’ä¸€åŒ–åŽçš„ç‰¹å¾ï¼š`feature = feature * scale + shift`ã€‚* **ï¼ˆè¿™æ˜¯å¯¹åŽŸæœ‰å—çš„ä¿®æ”¹ï¼Œä¸æ˜¯æ›¿æ¢æˆ Transformerï¼‰**
        5.  **è‡ªæ³¨æ„åŠ›å±‚ (Spatial Self-Attention)ï¼š** *è¿™æ˜¯åŠ å…¥çš„ç¬¬ä¸€ä¸ª Transformer ç»„ä»¶ã€‚* å®ƒè®©ç‰¹å¾å›¾ä¸Šçš„æ¯ä¸ªç©ºé—´ä½ç½®éƒ½èƒ½å…³æ³¨å…¶ä»–æ‰€æœ‰ä½ç½®ã€‚è¿™æœ‰åŠ©äºŽå»ºæ¨¡å›¾åƒå†…éƒ¨çš„**é•¿è·ç¦»ä¾èµ–å…³ç³»**å’Œ**å…¨å±€ç»“æž„ä¸€è‡´æ€§**ï¼Œè¿™æ˜¯çº¯ CNN åœ¨æ·±å±‚å°ç‰¹å¾å›¾ä¸Šç›¸å¯¹è–„å¼±çš„æ–¹é¢ã€‚è¾“å…¥å’Œè¾“å‡ºç»´åº¦ç›¸åŒã€‚
        6.  **äº¤å‰æ³¨æ„åŠ›å±‚ (Cross-Attention)ï¼š** *è¿™æ˜¯åŠ å…¥çš„ç¬¬äºŒä¸ªä¹Ÿæ˜¯æœ€å…³é”®çš„ Transformer ç»„ä»¶ã€‚* è¿™æ˜¯æ–‡æœ¬æ¡ä»¶ä¿¡æ¯æ³¨å…¥çš„æ ¸å¿ƒé€šé“ã€‚
            *   **Query (`Q`)**: æ¥è‡ªå½“å‰æ­¥éª¤ (5) è¾“å‡ºçš„**å›¾åƒç‰¹å¾** (é€šå¸¸ä¼šè¢«çº¿æ€§æŠ•å½±)ã€‚
            *   **Key (`K`), Value (`V`)**: æ¥è‡ª**æ–‡æœ¬åµŒå…¥** `text_embeddings` (ç”± CLIP æ–‡æœ¬ç¼–ç å™¨äº§ç”Ÿï¼Œä¹Ÿè¢«çº¿æ€§æŠ•å½±)ã€‚
            *   æ³¨æ„åŠ›æœºåˆ¶è®¡ç®— `Q` å’Œ `K` çš„ç›¸ä¼¼åº¦ï¼Œå¾—åˆ°ä¸€ä¸ªæƒé‡çŸ©é˜µï¼Œç„¶åŽç”¨è¿™ä¸ªæƒé‡å¯¹ `V` (æ–‡æœ¬ä¿¡æ¯) è¿›è¡ŒåŠ æƒæ±‚å’Œã€‚æœ€ç»ˆè¾“å‡ºæ˜¯å›¾åƒç‰¹å¾æ ¹æ®æ–‡æœ¬è¯­ä¹‰ä¿¡æ¯è°ƒåˆ¶åŽçš„ç»“æžœã€‚è¾“å‡ºç»´åº¦ä¸Žè¾“å…¥ `Q` ç›¸åŒï¼ˆå³å›¾åƒç‰¹å¾ç»´åº¦ï¼‰ã€‚
        7.  **åŽç»­å·ç§¯å±‚ (å¯é€‰)ï¼š** å¯èƒ½è¿˜æœ‰é¢å¤–çš„å·ç§¯å±‚è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚
        8.  **æ®‹å·®è¿žæŽ¥ï¼š** å°†åŽŸå§‹è¾“å…¥åŠ åˆ°å½“å‰å¤„ç†åŽçš„ç‰¹å¾ä¸Šã€‚

    **å…³é”®ç‚¹ï¼š** Transformer å—ï¼ˆè‡ªæ³¨æ„åŠ› + äº¤å‰æ³¨æ„åŠ›ï¼‰æ˜¯**åµŒå…¥**åœ¨åŽŸæœ‰çš„å·ç§¯æ®‹å·®å—ç»“æž„ä¸­çš„ï¼Œ**æ›¿æ¢äº†åŽŸæœ¬å¯èƒ½å­˜åœ¨çš„é¢å¤–å·ç§¯å±‚çš„ä½ç½®ï¼Œæˆ–è€…ä½œä¸ºæ–°å¢žçš„ç»„ä»¶æ’å…¥**ã€‚å®ƒè®©æ¯ä¸ªâ€œæ®‹å·®å—â€å…·å¤‡äº†åŒæ—¶å¤„ç†ç©ºé—´ä¿¡æ¯ï¼ˆCNN + è‡ªæ³¨æ„åŠ›ï¼‰å’Œæ–‡æœ¬è¯­ä¹‰ä¿¡æ¯ï¼ˆäº¤å‰æ³¨æ„åŠ›ï¼‰çš„èƒ½åŠ›ã€‚

2.  **æ’å…¥ä½ç½®ï¼š**
    *   è¿™äº›åŒ…å« Transformer å±‚ï¼ˆè‡ªæ³¨æ„åŠ› + äº¤å‰æ³¨æ„åŠ›ï¼‰çš„æ¡ä»¶åŒ–æ®‹å·®å—ï¼Œ**ä¸»è¦è¢«æ”¾ç½®åœ¨ UNet çš„ Bottleneckï¼ˆç“¶é¢ˆå±‚ï¼‰ä»¥åŠä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·è·¯å¾„çš„ä¸­é—´å±‚ï¼ˆéžæœ€åº•å±‚å’Œæœ€é¡¶å±‚ï¼‰**ã€‚
    *   **SD 1.x:** Transformer å—é€šå¸¸åªåœ¨ Bottleneck å’Œéƒ¨åˆ†ä¸­é—´åˆ†è¾¨çŽ‡å±‚ï¼ˆå¦‚ä¸‹é‡‡æ ·åˆ° 16x16, 8x8ï¼Œä¸Šé‡‡æ ·å¯¹åº”çš„å±‚ï¼‰åŠ å…¥ã€‚
    *   **SD 2.x (å…³é”®æ”¹è¿›):** **æ˜¾è‘—å¢žåŠ äº† Transformer å—çš„æ’å…¥å¯†åº¦å’Œè§„æ¨¡ã€‚**
        *   åœ¨æ›´å¤šçš„åˆ†è¾¨çŽ‡å±‚çº§ï¼ˆåŒ…æ‹¬æ›´é«˜åˆ†è¾¨çŽ‡å±‚ï¼Œå¦‚ 32x32ï¼‰åŠ å…¥äº†æ¡ä»¶åŒ–æ®‹å·®å—ã€‚
        *   å¢žåŠ äº† Transformer å—å†…éƒ¨çš„ **é€šé“ç»´åº¦ (å®½åº¦)** å’Œ **Transformer å±‚çš„æ•°é‡ (æ·±åº¦)**ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¡ä»¶åŒ–æ®‹å·®å—å†…å¯èƒ½åŒ…å«å¤šä¸ªä¸²è”çš„è‡ªæ³¨æ„åŠ› + äº¤å‰æ³¨æ„åŠ›å±‚å¯¹ã€‚
        *   ä½¿ç”¨äº†æ›´å¤§çš„ **æ–‡æœ¬ä¸Šä¸‹æ–‡é•¿åº¦**ï¼ˆ77 -> 77 æˆ–æ›´é•¿ï¼‰å’Œ **æ–‡æœ¬åµŒå…¥ç»´åº¦**ï¼ˆ768 -> 1024 æˆ–æ›´é«˜ï¼‰ã€‚
    *   **è¾“å…¥å±‚ (é«˜åˆ†è¾¨çŽ‡) å’Œ è¾“å‡ºå±‚ (é«˜åˆ†è¾¨çŽ‡) é€šå¸¸ä¿ç•™ä¸ºçº¯å·ç§¯å±‚æˆ–åªå«è‡ªæ³¨æ„åŠ›çš„å±‚**ï¼Œå› ä¸ºåœ¨è¿™äº›å±‚çº§åšå…¨å±€äº¤å‰æ³¨æ„åŠ›è®¡ç®—ä»£ä»·éžå¸¸é«˜ï¼ˆç©ºé—´ä½ç½®å¤ªå¤šï¼‰ï¼Œä¸”ä½Žå±‚ç‰¹å¾æ›´å…³æ³¨å±€éƒ¨çº¹ç†è€Œéžå…¨å±€è¯­ä¹‰ã€‚

**è‰å›¾è¯´æ˜Ž (æ–‡å­—æè¿°ç»“æž„)**

æƒ³è±¡ä¸€ä¸ªå…¸åž‹çš„ UNet æ²™æ¼å½¢çŠ¶ï¼š

```
          Encoder (Downsample Path)                 Decoder (Upsample Path)
High Res (e.g., 64x64) ------------------------> Low Res (e.g., 8x8) ------------------------> High Res (e.g., 64x64)
       |          |          |          |              |          |          |          |
      [C]        [C]        [C+T]     [C+T]           [C+T]      [C+T]      [C]        [C]
       |          |          |          |              |          |          |          |
       V          V          V          V              V          V          V          V
      DS         DS         DS         DS             US         US         US         US
       |          |          |          |              |          |          |          |
       V          V          V          V              V          V          V          V
      ...        ...       [C+T]     [C+T] <-------- [C+T]      [C+T]      ...        ...
       |          |          |          |   Skip      |          |          |          |
       |          |          |          | Connection  |          |          |          |
       V          V          V          V              V          V          V          V
      ...        ...        ...      [C+T] (Bottleneck) [C+T]      ...        ...        ...
```

**å›¾ä¾‹ï¼š**

*   `[C]`: **çº¯å·ç§¯æ®‹å·®å—** (å¯èƒ½åŒ…å«æ—¶é—´æ­¥æ³¨å…¥ `t`ï¼Œä½†ä¸åŒ…å«æ³¨æ„åŠ›å±‚)ã€‚é€šå¸¸ç”¨äºŽæœ€é«˜/æœ€ä½Žåˆ†è¾¨çŽ‡å±‚ã€‚
*   `[C+T]`: **æ¡ä»¶åŒ–æ®‹å·®å— (åŒ…å« Transformer)**ã€‚åŒ…å«ï¼š
    *   `C` (å·ç§¯å±‚)
    *   `GN` (GroupNorm)
    *   `Act` (SiLU)
    *   `t` (æ—¶é—´æ­¥æ³¨å…¥ï¼š`scale & shift`)
    *   `SA` (ç©ºé—´è‡ªæ³¨æ„åŠ› Spatial Self-Attention)
    *   `CA` (äº¤å‰æ³¨æ„åŠ› Cross-Attention: Image Q, Text K/V)
    *   (å¯èƒ½è¿˜æœ‰åŽç»­ `C`/`GN`/`Act`)
    *   æ®‹å·®è¿žæŽ¥ã€‚
*   `DS`: ä¸‹é‡‡æ ·æ“ä½œ (å¦‚ Strided Conv)ã€‚
*   `US`: ä¸Šé‡‡æ ·æ“ä½œ (å¦‚ Transposed Conv æˆ– Nearest Upsample + Conv)ã€‚
*   `--->`: ä¸»å¹²è·¯å¾„ã€‚
*   `Skip Connection`: è·³è·ƒè¿žæŽ¥ï¼Œå°†ç¼–ç å™¨ç‰¹å¾ä¼ é€’åˆ°è§£ç å™¨å¯¹åº”å±‚ï¼ˆé€šå¸¸é€šè¿‡æ‹¼æŽ¥æˆ–åŠ æ³•ï¼‰ã€‚
*   `Bottleneck`: æœ€ä½Žåˆ†è¾¨çŽ‡å±‚ï¼ˆä¿¡æ¯æœ€åŽ‹ç¼©ï¼‰ã€‚

**SD 1.x vs SD 2.x åœ¨ Transformer ä½¿ç”¨ä¸Šçš„åŒºåˆ« (è‰å›¾ç¤ºæ„)ï¼š**

```
å‡è®¾ UNet æœ‰ 4 ä¸ªä¸‹é‡‡æ ·/ä¸Šé‡‡æ ·é˜¶æ®µ (åˆ†è¾¨çŽ‡ï¼š64 -> 32 -> 16 -> 8 -> 4 -> 8 -> 16 -> 32 -> 64)

SD 1.x Transformer æ’å…¥ (ç¤ºä¾‹)ï¼š
  64: [C]     -> [C]     (é€šå¸¸æ—  T)
  32: [C]     -> [C]     (å¯èƒ½æ—  T æˆ–å°‘é‡å±‚æœ‰ T)
  16: [C+T]   -> [C+T]   (ä¸»è¦æ’å…¥å±‚)
   8: [C+T]   -> [C+T]   (ä¸»è¦æ’å…¥å±‚)
   4: [C+T]   (Bottleneck - å¿…æœ‰ T)
   8: [C+T]   -> [C+T]
  16: [C+T]   -> [C+T]
  32: [C]     -> [C]
  64: [C]     -> [C]

SD 2.x Transformer æ’å…¥ (ç¤ºä¾‹ - æ›´å¯†é›†ã€æ›´æ·±ã€æ›´å®½)ï¼š
  64: [C]       -> [C]       (é¡¶å±‚å¯èƒ½ä»æ—  T)
  32: [C+T]     -> [C+T]     (æ–°å¢žäº† T å±‚ï¼)
  16: [C+T]xN   -> [C+T]xN   (N å¯èƒ½ >1ï¼Œå—å†…å¤šå±‚ T)
   8: [C+T]xN   -> [C+T]xN   (N å¯èƒ½ >1)
   4: [C+T]xM   (Bottleneck - M å¯èƒ½æ›´å¤§)
   8: [C+T]xN   -> [C+T]xN
  16: [C+T]xN   -> [C+T]xN
  32: [C+T]     -> [C+T]     (æ–°å¢žäº† T å±‚ï¼)
  64: [C]       -> [C]
```

**æ€»ç»“å…³é”®æ”¹è¿›ï¼š**

1.  **æ ¸å¿ƒæœºåˆ¶ï¼š** åœ¨ CNN UNet çš„æ®‹å·®å—ä¸­**åµŒå…¥ Transformer å±‚**ï¼ˆè‡ªæ³¨æ„åŠ› + äº¤å‰æ³¨æ„åŠ›ï¼‰ï¼Œè€Œéžæ•´ä½“æ›¿æ¢ã€‚
2.  **å…³é”®æ›¿æ¢/æ–°å¢žç»„ä»¶ï¼š**
    *   **è‡ªæ³¨æ„åŠ›å±‚ (SA)ï¼š** æ›¿æ¢äº†éƒ¨åˆ†ç”¨äºŽå»ºæ¨¡é•¿è·ç¦»ä¾èµ–çš„æ·±å±‚å·ç§¯ï¼Œæˆ–ä½œä¸ºæ–°å¢žç»„ä»¶ã€‚å¢žå¼ºå›¾åƒå†…éƒ¨ç»“æž„ä¸€è‡´æ€§ã€‚
    *   **äº¤å‰æ³¨æ„åŠ›å±‚ (CA)ï¼š** **è¿™æ˜¯æœ€é‡è¦çš„æ–°å¢žç»„ä»¶ï¼** å®ƒå»ºç«‹äº†å›¾åƒç‰¹å¾ (`Q`) å’Œæ–‡æœ¬åµŒå…¥ (`K`, `V`) ä¹‹é—´çš„ç›´æŽ¥è”ç³»ï¼Œæ˜¯æ–‡æœ¬æ¡ä»¶æŽ§åˆ¶å›¾åƒç”Ÿæˆçš„æ ¸å¿ƒã€‚å®ƒæ›¿æ¢äº†ä¼ ç»Ÿæ¡ä»¶ç”Ÿæˆæ¨¡åž‹ä¸­ç®€å•çš„ç‰¹å¾æ‹¼æŽ¥æˆ–ç›¸åŠ ç­‰è¾ƒå¼±çš„æ¡ä»¶æ³¨å…¥æ–¹å¼ã€‚
    *   **æ—¶é—´æ­¥æ³¨å…¥ï¼š** ä¿®æ”¹äº†æ®‹å·®å—ï¼Œé€šè¿‡ `scale & shift` è°ƒåˆ¶ç‰¹å¾ï¼Œæ›´æœ‰æ•ˆåœ°èžå…¥æ‰©æ•£è¿‡ç¨‹çš„æ—¶é—´ä¿¡æ¯ã€‚
3.  **SD 2.x çš„å¢žå¼ºï¼š**
    *   **æ›´å¹¿ï¼š** åœ¨æ›´å¤šåˆ†è¾¨çŽ‡å±‚çº§ï¼ˆåŒ…æ‹¬è¾ƒé«˜åˆ†è¾¨çŽ‡å¦‚ 32x32ï¼‰åŠ å…¥æ¡ä»¶åŒ–æ®‹å·®å—ã€‚
    *   **æ›´æ·±ï¼š** å•ä¸ªæ¡ä»¶åŒ–æ®‹å·®å—å†…å¯èƒ½åŒ…å«å¤šä¸ªä¸²è”çš„ (SA + CA) å±‚å¯¹ (`xN`, `xM`)ã€‚
    *   **æ›´å®½ï¼š** å¢žåŠ äº† Transformer å±‚å†…éƒ¨çš„é€šé“ç»´åº¦ï¼ˆç‰¹å¾å‘é‡é•¿åº¦ï¼‰ã€‚
    *   **æ›´å¼ºçš„æ–‡æœ¬ç¼–ç ï¼š** ä½¿ç”¨æ›´å¤§çš„æ–‡æœ¬åµŒå…¥ï¼ˆOpenCLIPï¼‰ï¼Œæä¾›æ›´ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ã€‚

**ç»“è®ºï¼š**

Stable Diffusion çš„æˆåŠŸå¾ˆå¤§ç¨‹åº¦ä¸Šå½’åŠŸäºŽè¿™ç§ **CNN-Transformer æ··åˆæž¶æž„**ã€‚CNN ä¿ç•™äº†å¼ºå¤§çš„å±€éƒ¨ç‰¹å¾æå–å’Œç©ºé—´å½’çº³èƒ½åŠ›ï¼Œå°¤å…¶é€‚åˆå¤„ç†å›¾åƒæ•°æ®ã€‚è€ŒåµŒå…¥çš„ Transformer å±‚ï¼Œç‰¹åˆ«æ˜¯**äº¤å‰æ³¨æ„åŠ›æœºåˆ¶**ï¼Œæä¾›äº†å¼ºå¤§çš„**æ¡ä»¶ä¿¡æ¯èžåˆèƒ½åŠ›**ï¼Œä½¿å¾—æ¨¡åž‹èƒ½å¤Ÿç²¾ç¡®ç†è§£æ–‡æœ¬æç¤ºå¹¶æŒ‡å¯¼å›¾åƒç”Ÿæˆè¿‡ç¨‹ã€‚è‡ªæ³¨æ„åŠ›å±‚åˆ™å¼¥è¡¥äº† CNN åœ¨å»ºæ¨¡å…¨å±€ä¾èµ–ä¸Šçš„ä¸è¶³ã€‚SD 2.x é€šè¿‡å¢žåŠ  Transformer çš„å¯†åº¦ã€æ·±åº¦å’Œå®½åº¦ï¼Œè¿›ä¸€æ­¥æå‡äº†æ¨¡åž‹çš„è¡¨è¾¾èƒ½åŠ›å’Œç”Ÿæˆè´¨é‡ã€‚è¿™ç§æ··åˆæž¶æž„åœ¨æ½œæ‰©æ•£æ¨¡åž‹ä¸­å–å¾—äº†æ˜¾è‘—çš„æˆæ•ˆã€‚

---

### ðŸ§‘â€ðŸ’» User

Stable Diffusion 3ï¼šé‡‡ç”¨äº†DiTæž¶æž„ä½œä¸ºå…¶éª¨å¹²ç½‘ç»œã€‚ä¸ºä»€ä¹ˆè¦æ”¾å¼ƒäº†UNetç»“æž„ï¼Œä½¿ç”¨çº¯Transformerï¼ˆDiT Blockï¼‰å®Œå…¨å–ä»£Unetï¼Ÿå®ƒçš„ç»“æž„åˆæ˜¯æ€Žä¹ˆæ ·çš„ï¼Ÿ

---

### ðŸ¤– Assistant

Stable Diffusion 3 (SD3) çš„æ ¸å¿ƒå˜é©åœ¨äºŽ**å½»åº•æ‘’å¼ƒäº† UNet æž¶æž„ï¼Œè½¬è€Œé‡‡ç”¨åŸºäºŽçº¯ Transformer çš„ Diffusion Transformer (DiT) ä½œä¸ºå…¶éª¨å¹²ç½‘ç»œ**ã€‚è¿™ä¸€å†³ç­–æ˜¯ç”Ÿæˆæ¨¡åž‹æž¶æž„æ¼”è¿›çš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œå…¶èƒŒåŽæœ‰æ·±åˆ»çš„åŠ¨æœºï¼Œç»“æž„ä¹Ÿä¸Žä¹‹å‰çš„ UNet æœ‰æœ¬è´¨åŒºåˆ«ã€‚

**ä¸€ã€ ä¸ºä»€ä¹ˆæ”¾å¼ƒ UNetï¼Œé‡‡ç”¨çº¯ Transformer (DiT)ï¼Ÿ**

1.  **Transformer çš„å…¨å±€å»ºæ¨¡èƒ½åŠ›ä¼˜åŠ¿ï¼š**
    *   **UNet çš„å±€é™ï¼š** å°½ç®¡ SD1.x/2.x çš„ UNet é€šè¿‡å¼•å…¥æ³¨æ„åŠ›æœºåˆ¶ï¼ˆè‡ªæ³¨æ„åŠ›ã€äº¤å‰æ³¨æ„åŠ›ï¼‰å¢žå¼ºäº†å…¨å±€ç†è§£ï¼Œä½†å…¶åŸºç¡€ä»æ˜¯**å·ç§¯æ“ä½œ**ã€‚å·ç§¯æœ¬è´¨ä¸Šæ˜¯**å±€éƒ¨æ“ä½œ**ï¼Œä¾é å †å å±‚å’Œé™é‡‡æ ·æ¥æ‰©å¤§æ„Ÿå—é‡Žã€‚åœ¨å»ºæ¨¡å›¾åƒä¸­**é•¿è·ç¦»ä¾èµ–å…³ç³»**å’Œ**é«˜åº¦å¤æ‚çš„å…¨å±€ç»“æž„ä¸€è‡´æ€§**ï¼ˆå¦‚å¤šä¸ªç‰©ä½“çš„ç©ºé—´å…³ç³»ã€é€è§†ã€å¤æ‚çº¹ç†çš„æ•´ä½“åè°ƒï¼‰æ—¶ï¼Œæ•ˆçŽ‡ä¸å¦‚è‡ªæ³¨æ„åŠ›æœºåˆ¶ã€‚
    *   **Transformer çš„ä¼˜åŠ¿ï¼š** è‡ªæ³¨æ„åŠ›æœºåˆ¶å¤©ç„¶å…·æœ‰**å…¨å±€å»ºæ¨¡èƒ½åŠ›**ã€‚æ¯ä¸ªå…ƒç´ ï¼ˆåœ¨å›¾åƒä¸­æ˜¯ patch æˆ–æ½œåœ¨è¡¨ç¤ºä¸­çš„ tokenï¼‰éƒ½èƒ½ç›´æŽ¥ä¸Žåºåˆ—ä¸­æ‰€æœ‰å…¶ä»–å…ƒç´ äº¤äº’ï¼Œæ— è®ºè·ç¦»å¤šè¿œã€‚è¿™å¯¹äºŽç”Ÿæˆå…·æœ‰**é«˜åº¦ç»†èŠ‚ä¸€è‡´æ€§ã€å¤æ‚æž„å›¾ã€ç²¾ç¡®ç©ºé—´å…³ç³»**çš„å›¾åƒè‡³å…³é‡è¦ã€‚

2.  **æž¶æž„çš„ç»Ÿä¸€æ€§ä¸Žå¯æ‰©å±•æ€§ï¼š**
    *   **UNet çš„å¼‚æž„æ€§ï¼š** SD çš„ UNet æ˜¯ä¸€ä¸ªæ··åˆä½“ï¼ŒåŒ…å«å·ç§¯å±‚ã€å½’ä¸€åŒ–å±‚ã€æ¿€æ´»å‡½æ•°ã€ä¸Š/ä¸‹é‡‡æ ·å±‚ã€ä»¥åŠå„ç§æ³¨æ„åŠ›å±‚ï¼ˆç©ºé—´è‡ªæ³¨æ„åŠ›ã€äº¤å‰æ³¨æ„åŠ›ï¼‰ã€‚è¿™ç§å¼‚æž„æ€§å¢žåŠ äº†æž¶æž„çš„å¤æ‚æ€§ã€‚
    *   **DiT çš„çº¯ Transformer ç»Ÿä¸€æ€§ï¼š** DiT æž¶æž„å‡ ä¹Žå®Œå…¨ç”±ç›¸åŒçš„ **DiT Block** å †å è€Œæˆï¼Œç»“æž„é«˜åº¦ç»Ÿä¸€ã€‚è¿™ç§ç»Ÿä¸€æ€§å¸¦æ¥äº†ï¼š
        *   **æ›´ç®€æ´çš„è®¾è®¡ï¼š** ç†è§£å’Œå®žçŽ°æ›´ç®€å•ã€‚
        *   **æ›´å¥½çš„å¯æ‰©å±•æ€§ï¼š** æ›´å®¹æ˜“é€šè¿‡å¢žåŠ  **Block æ•°é‡ (æ·±åº¦)**ã€**éšè—å±‚ç»´åº¦ (å®½åº¦)** æˆ– **æ³¨æ„åŠ›å¤´æ•°** æ¥æ‰©å¤§æ¨¡åž‹è§„æ¨¡ã€‚å®žéªŒè¡¨æ˜Žï¼Œ**æ›´å¤§çš„ DiT æ¨¡åž‹æ€§èƒ½æå‡æ˜¾è‘—ä¸”è§„å¾‹**ï¼Œå±•çŽ°äº† Transformer ç»å…¸çš„â€œScaling Lawâ€ã€‚
        *   **ç¡¬ä»¶ä¼˜åŒ–å‹å¥½ï¼š** çŽ°ä»£ AI åŠ é€Ÿç¡¬ä»¶ï¼ˆå¦‚ TPU, GPUï¼‰å¯¹å¯†é›†çš„çŸ©é˜µä¹˜æ³•ï¼ˆTransformer çš„æ ¸å¿ƒï¼‰æœ‰æžå…¶é«˜æ•ˆçš„ä¼˜åŒ–ï¼Œè€Œå¯¹å¼‚æž„æ“ä½œèžåˆçš„ä¼˜åŒ–ç›¸å¯¹å¤æ‚ã€‚çº¯ Transformer ç»“æž„èƒ½æ›´å……åˆ†åœ°åˆ©ç”¨ç¡¬ä»¶ç®—åŠ›ã€‚

3.  **æ¡ä»¶æ³¨å…¥çš„ä¼˜é›…èžåˆï¼š**
    *   åœ¨ UNet ä¸­ï¼Œæ—¶é—´æ­¥ `t` å’Œæ–‡æœ¬æ¡ä»¶ï¼ˆ`text_embeddings`ï¼‰éœ€è¦ä»¥ç‰¹å®šæ–¹å¼ï¼ˆå¦‚ç‰¹å¾è°ƒåˆ¶ `scale/shift`ï¼Œäº¤å‰æ³¨æ„åŠ›ï¼‰æ³¨å…¥åˆ°ä¸åŒå±‚çº§çš„æ®‹å·®å—ä¸­ï¼Œè®¾è®¡ç›¸å¯¹å¤æ‚ã€‚
    *   åœ¨ DiT ä¸­ï¼Œæ¡ä»¶ä¿¡æ¯å¯ä»¥æ›´ç»Ÿä¸€ã€æ›´è‡ªç„¶åœ°èžå…¥åˆ°æ¯ä¸ª **DiT Block** ä¸­ã€‚é€šå¸¸é€šè¿‡ **è‡ªé€‚åº”å±‚å½’ä¸€åŒ– (Adaptive Layer Norm, AdaLN)** æˆ–å…¶å˜ç§ï¼ˆå¦‚ **AdaLN-Zero**ï¼‰æ¥è°ƒåˆ¶æ•´ä¸ª Block çš„è¡Œä¸ºã€‚æ–‡æœ¬æ¡ä»¶é€šå¸¸é€šè¿‡ **äº¤å‰æ³¨æ„åŠ›å±‚** æ³¨å…¥ã€‚è¿™ç§èžåˆæ–¹å¼åœ¨ Transformer æ¡†æž¶ä¸‹æ˜¾å¾—æ›´åŽŸç”Ÿå’Œé«˜æ•ˆã€‚

4.  **æ€§èƒ½æå‡çš„å®žè¯ï¼š**
    *   è®ºæ–‡ã€ŠScalable Diffusion Models with Transformersã€‹ç³»ç»Ÿåœ°æ¯”è¾ƒäº† DiT å’ŒåŸºäºŽ CNN çš„æ‰©æ•£æ¨¡åž‹ï¼ˆåŒ…æ‹¬ç±» UNet ç»“æž„ï¼‰ã€‚ç»“æžœè¡¨æ˜Žï¼Œåœ¨ç›¸åŒçš„å‚æ•°é‡ã€è®­ç»ƒæ­¥éª¤å’Œæ•°æ®é›†ä¸Šï¼Œ**DiT æ¨¡åž‹åœ¨ FID (FrÃ©chet Inception Distance) å’Œ IS (Inception Score) ç­‰æŒ‡æ ‡ä¸Šæ˜¾è‘—ä¼˜äºŽ CNN éª¨å¹²**ã€‚
    *   æ›´é‡è¦çš„æ˜¯ï¼Œ**DiT çš„ Scaling Law éžå¸¸æ˜Žæ˜¾**ï¼šå¢žå¤§æ¨¡åž‹è§„æ¨¡ï¼ˆæ›´å¤šå‚æ•°ã€æ›´å¤šè®¡ç®—ï¼‰æŒç»­å¸¦æ¥ç”Ÿæˆè´¨é‡çš„æå‡ï¼Œä¸”è¿™ç§æå‡è¶‹åŠ¿åœ¨å®žéªŒèŒƒå›´å†…æ²¡æœ‰é¥±å’Œè¿¹è±¡ã€‚è¿™ä¸ºæœªæ¥ç”Ÿæˆæ¨¡åž‹çš„å‘å±•æŒ‡æ˜Žäº†æ–¹å‘ã€‚

5.  **é¡ºåº”å¤§æ¨¡åž‹è¶‹åŠ¿ï¼š**
    *   Transformer å·²æˆä¸º NLPã€å¤šæ¨¡æ€ç­‰é¢†åŸŸå¤§æ¨¡åž‹ï¼ˆLLMï¼‰çš„ç»å¯¹ä¸»å¯¼æž¶æž„ã€‚SD3 é‡‡ç”¨ DiT æ ‡å¿—ç€å›¾åƒç”Ÿæˆé¢†åŸŸä¹Ÿå…¨é¢æ‹¥æŠ±äº† Transformer èŒƒå¼ï¼Œæœ‰åˆ©äºŽçŸ¥è¯†ã€æŠ€æœ¯å’ŒåŸºç¡€è®¾æ–½ï¼ˆå¦‚è®­ç»ƒæ¡†æž¶ã€ä¼˜åŒ–æŠ€æœ¯ï¼‰çš„è·¨é¢†åŸŸè¿ç§»å’Œç»Ÿä¸€ã€‚

**äºŒã€ Stable Diffusion 3 (DiT) çš„ç»“æž„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ**

SD3 çš„éª¨å¹² DiT æž¶æž„å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼ˆç¤ºæ„å›¾è§ä¸‹æ–¹æ–‡å­—æè¿°ï¼‰ï¼š

1.  **è¾“å…¥ï¼š** ä¸Ž SD1/2 ç±»ä¼¼ï¼ŒDiT ä»ç„¶åœ¨**æ½œç©ºé—´ (Latent Space)** ä¸­æ“ä½œã€‚
    *   è¾“å…¥æ˜¯å¸¦å™ªå£°çš„æ½œå˜é‡ `z_t` (å½¢çŠ¶å¦‚ `[B, C, H, W]`ï¼Œä¾‹å¦‚ `[batch_size, 4, 64, 64]`)ã€‚
    *   åŒæ—¶è¾“å…¥æ—¶é—´æ­¥ `t` çš„åµŒå…¥å‘é‡å’Œæ–‡æœ¬åµŒå…¥ `c_text`ã€‚

2.  **Patchify (åˆ†å—åµŒå…¥)ï¼š**
    *   å°† 2D çš„æ½œå˜é‡ `z_t` åˆ’åˆ†ä¸º `P x P` ä¸ªéžé‡å çš„ patchï¼ˆç±»ä¼¼äºŽ ViTï¼‰ã€‚ä¾‹å¦‚ï¼Œ`64x64` çš„æ½œå˜é‡åˆ’åˆ†ä¸º `8x8` çš„ patchï¼Œåˆ™å¾—åˆ° `(64/8) * (64/8) = 64` ä¸ª patchã€‚
    *   æ¯ä¸ª patch è¢«å±•å¹³ä¸ºä¸€ä¸ªå‘é‡ï¼ˆé•¿åº¦ä¸º `C * P * P`ï¼Œä¾‹å¦‚ `4 * 8 * 8 = 256`ï¼‰ã€‚
    *   è¿™äº› patch å‘é‡é€šè¿‡ä¸€ä¸ª**çº¿æ€§æŠ•å½±å±‚ (Linear Projection)** æ˜ å°„åˆ° Transformer çš„éšè—ç»´åº¦ `D`ï¼ˆä¾‹å¦‚ `D=1152`ï¼‰ã€‚
    *   ç»“æžœæ˜¯ä¸€ä¸ª**åºåˆ—çš„ token**ï¼šå½¢çŠ¶ä¸º `[B, N, D]`ï¼Œå…¶ä¸­ `N = (H/P) * (W/P)` æ˜¯ token çš„æ•°é‡ï¼ˆä¾‹å¦‚ `[batch_size, 64, 1152]`ï¼‰ã€‚
    *   ä¸ºåºåˆ—æ·»åŠ æ ‡å‡†çš„**å¯å­¦ä¹ ä½ç½®ç¼–ç  (Position Embedding)** æˆ– **æ­£å¼¦ä½ç½®ç¼–ç **ï¼Œä»¥ä¿ç•™ç©ºé—´ä½ç½®ä¿¡æ¯ã€‚

3.  **DiT Blocks å †å  (æ ¸å¿ƒ)ï¼š**
    *   åºåˆ— token è¾“å…¥åˆ°ä¸€ç³»åˆ—å®Œå…¨ç›¸åŒçš„ **DiT Blocks** ä¸­ã€‚SD3 ä½¿ç”¨äº†**å¤§é‡**çš„ DiT Blocksï¼ˆå…·ä½“æ•°é‡å–å†³äºŽæ¨¡åž‹å¤§å°ï¼Œå¦‚ DiT-XL æœ‰ 28 å±‚ï¼‰ã€‚
    *   **æ¯ä¸ª DiT Block çš„æ ¸å¿ƒç»„ä»¶ï¼š**
        *   **è‡ªé€‚åº”å±‚å½’ä¸€åŒ– (AdaLN) æˆ– AdaLN-Zeroï¼š**
            *   è¿™æ˜¯**æ¡ä»¶æ³¨å…¥çš„å…³é”®**ã€‚
            *   é¦–å…ˆï¼Œå°†**æ—¶é—´æ­¥åµŒå…¥ `t`** å’Œï¼ˆé€šå¸¸ä¹Ÿä¼šåŒ…å«ï¼‰**æ–‡æœ¬åµŒå…¥çš„å…¨å±€æ± åŒ–å‘é‡ `c_text`** è¿žæŽ¥æˆ–èžåˆï¼ˆä¾‹å¦‚é€šè¿‡ä¸€ä¸ªå° MLPï¼‰ã€‚
            *   ç”¨èžåˆåŽçš„æ¡ä»¶å‘é‡é¢„æµ‹**ç¼©æ”¾å› å­ `Î³`** å’Œ**å¹³ç§»å› å­ `Î²`** (ç»´åº¦å‡ä¸º `D`)ã€‚
            *   **AdaLNï¼š** å¯¹ Block çš„è¾“å…¥ `x` åº”ç”¨ LayerNormï¼Œç„¶åŽç”¨ `Î³ * LN(x) + Î²` è¿›è¡Œè°ƒåˆ¶ã€‚`Î³` å’Œ `Î²` æ˜¯å‘é‡ï¼Œä½œç”¨äºŽæ¯ä¸ª token çš„æ‰€æœ‰ç‰¹å¾ç»´åº¦ã€‚
            *   **AdaLN-Zeroï¼š** ä¸€ç§æ”¹è¿›ç‰ˆæœ¬ï¼Œé€šå¸¸åˆå§‹åŒ–æ—¶ä»¤ `Î³` é¢„æµ‹åˆ†æ”¯çš„æœ€åŽä¸€å±‚æƒé‡åˆå§‹åŒ–ä¸º 0ï¼Œä½¿å¾— Block çš„åˆå§‹çŠ¶æ€æ˜¯ä¸€ä¸ªæ’ç­‰å‡½æ•°ï¼Œæœ‰åŠ©äºŽè®­ç»ƒç¨³å®šæ€§ã€‚è¿™æ˜¯ DiT è®ºæ–‡æå‡ºçš„é‡è¦æŠ€å·§ã€‚
        *   **å¤šå¤´è‡ªæ³¨æ„åŠ› (Multi-head Self-Attention, MSA)ï¼š**
            *   è®©æ‰€æœ‰ token ä¹‹é—´è¿›è¡Œå…¨å±€äº¤äº’ï¼Œå»ºæ¨¡ patch ä¹‹é—´çš„é•¿è·ç¦»ä¾èµ–å…³ç³»ã€‚
            *   æ˜¯ Transformer çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯æ›¿ä»£ CNN å±€éƒ¨å»ºæ¨¡çš„å…³é”®ã€‚
        *   **ï¼ˆå¯é€‰/æ¡ä»¶æ€§ï¼‰äº¤å‰æ³¨æ„åŠ› (Cross-Attention, CA)ï¼š**
            *   ä¸ºäº†èžåˆæ–‡æœ¬æ¡ä»¶ `c_text`ã€‚
            *   **Query (`Q`)**: æ¥è‡ªè‡ªæ³¨æ„åŠ›è¾“å‡ºï¼ˆæˆ– AdaLN è°ƒåˆ¶åŽï¼‰çš„ token (`[B, N, D]`)ã€‚
            *   **Key (`K`), Value (`V`)**: æ¥è‡ªæ–‡æœ¬åµŒå…¥åºåˆ— `c_text` (`[B, L_text, D_text]`ï¼ŒL_text æ˜¯æ–‡æœ¬ token é•¿åº¦)ã€‚é€šå¸¸éœ€è¦é€šè¿‡ä¸€ä¸ªçº¿æ€§å±‚å°† `D_text` æŠ•å½±åˆ° `D` ä»¥åŒ¹é…ç»´åº¦ã€‚
            *   æ³¨æ„åŠ›æœºåˆ¶è®¡ç®—å›¾åƒ token (`Q`) å’Œæ–‡æœ¬ token (`K`) ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œå¹¶ç”¨æ–‡æœ¬ä¿¡æ¯ (`V`) åŠ æƒæ±‚å’Œæ¥è°ƒåˆ¶å›¾åƒç‰¹å¾ã€‚
            *   *æ³¨æ„ï¼šåœ¨åŸºç¡€ DiT ä¸­ï¼Œæ–‡æœ¬æ¡ä»¶ä¸»è¦é€šè¿‡ AdaLN æ³¨å…¥ã€‚ä½†åœ¨ SD3 è¿™æ ·çš„æ–‡æœ¬åˆ°å›¾åƒæ¨¡åž‹ä¸­ï¼Œé€šå¸¸ä¼šåœ¨éƒ¨åˆ†æˆ–æ‰€æœ‰ DiT Block ä¸­æ˜¾å¼åŠ å…¥äº¤å‰æ³¨æ„åŠ›å±‚ï¼Œä»¥æ›´ç²¾ç»†åœ°èžåˆæ–‡æœ¬ä¿¡æ¯ã€‚å…·ä½“å®žçŽ°å¯èƒ½ç»“åˆ AdaLN å’Œ CAã€‚*
        *   **å¤šå±‚æ„ŸçŸ¥æœº (MLP)ï¼š**
            *   åŒ…å«ä¸¤ä¸ªå…¨è¿žæŽ¥å±‚å’Œä¸€ä¸ªæ¿€æ´»å‡½æ•°ï¼ˆå¦‚ GELUï¼‰ï¼Œæä¾›éžçº¿æ€§å˜æ¢èƒ½åŠ›ã€‚
            *   é€šå¸¸åœ¨ MLP ä¹‹å‰å’Œä¹‹åŽä¹Ÿåº”ç”¨ AdaLN æˆ– LayerNormï¼ˆå–å†³äºŽå…·ä½“è®¾è®¡ï¼‰ã€‚
    *   æ¯ä¸ª DiT Block å¯ä»¥æŠ½è±¡ä¸ºï¼š`x = x + MSA(AdaLN(x, t, c))` æˆ– `x = x + MSA(AdaLN(x, t, c)) + CA(AdaLN(x, t, c), c_text)`ï¼Œç„¶åŽæ˜¯ `x = x + MLP(AdaLN(x, t, c))`ã€‚å…¶ä¸­ AdaLN çš„ä½ç½®å’Œæ˜¯å¦åœ¨ CA å‰åŽä½¿ç”¨å¯èƒ½æœ‰å˜ä½“ã€‚

4.  **è¾“å‡ºå±‚ï¼š**
    *   ç»è¿‡æ‰€æœ‰ DiT Blocks å¤„ç†åŽï¼Œå¾—åˆ°å¤„ç†åŽçš„ token åºåˆ— `[B, N, D]`ã€‚
    *   åº”ç”¨ä¸€ä¸ª**æœ€ç»ˆçš„ AdaLN å±‚**ï¼ˆç”¨ `t` å’Œ `c_text` è°ƒåˆ¶ï¼‰ã€‚
    *   é€šè¿‡ä¸€ä¸ª**çº¿æ€§æŠ•å½±å±‚**å°†æ¯ä¸ª token ä»Žéšè—ç»´åº¦ `D` æŠ•å½±å›ž `C * P * P` ç»´åº¦ï¼ˆå³ä¸€ä¸ª patch å±•å¹³åŽçš„åŽŸå§‹ç»´åº¦ï¼‰ã€‚
    *   å°†æŠ•å½±åŽçš„ token åºåˆ— `[B, N, C*P*P]` **é‡æ–°æŽ’åˆ— (Unpatchify)** æˆ 2D ç‰¹å¾å›¾ `[B, C, H, W]`ã€‚
    *   è¿™ä¸ª 2D ç‰¹å¾å›¾å°±æ˜¯ DiT é¢„æµ‹çš„**å™ªå£° `Îµ_Î¸(z_t, t, c_text)`** æˆ–**åŽ»å™ªåŽçš„æ½œå˜é‡**ï¼ˆå…·ä½“ç›®æ ‡å–å†³äºŽæŸå¤±å‡½æ•°å®šä¹‰ï¼Œé€šå¸¸æ˜¯é¢„æµ‹å™ªå£°ï¼‰ã€‚

**ä¸‰ã€ ç»“æž„è‰å›¾ (æ–‡å­—æè¿°)**

```
          [Input: Noisy Latent z_t (B, C, H, W)]       [Timestep t]       [Text Embeddings c_text]
                     |                                       |                     |
                     v                                       v                     v
             +----------------+                      +----------------+      +------------+
             |   Patchify &   |                      |  Condition     |      |Text Encoder|
             | Linear Project |------------------->  | Fusion (MLP?)  |<-----| (e.g., T5) |
             | (B, N, D)      |                      | (t + c_text)   |      +------------+
             +----------------+                      +----------------+
                     |                                       |
                     | (Add Position Embedding)              |
                     v                                       v
          +------------------------------------------------------+
          |                   DiT Blocks (x L layers)             |
          |                                                      |
          |  +------------+  +------------+       +------------+  |
          |  | DiT Block  |  | DiT Block  |  ...  | DiT Block  |  |
          |  | +--------+ |  | +--------+ |       | +--------+ |  |
          |  | | AdaLN  | |  | | AdaLN  | |       | | AdaLN  | |  |<--- (Condition vector for Î³, Î²)
          |  | +----|---+ |  | +----|---+ |       | +----|---+ |  |
          |  |      v     |  |      v     |       |      v     |  |
          |  | +--------+ |  | +--------+ |       | +--------+ |  |
          |  | |  MSA   | |  | |  MSA   | |       | |  MSA   | |  |
          |  | +----|---+ |  | +----|---+ |       | +----|---+ |  |
          |  |      |     |  |      |     |       |      |     |  |
          |  | +----|---+ |  | +----|---+ |       | +----|---+ |  |<--- (Optional: Cross-Attention with c_text)
          |  | |  CA?  | |  | |  CA?  | |       | |  CA?  | |  |
          |  | +----|---+ |  | +----|---+ |       | +----|---+ |  |
          |  |      v     |  |      v     |       |      v     |  |
          |  | +--------+ |  | +--------+ |       | +--------+ |  |
          |  | | AdaLN  | |  | | AdaLN  | |       | | AdaLN  | |  |<--- (Condition vector for Î³, Î²)
          |  | +----|---+ |  | +----|---+ |       | +----|---+ |  |
          |  |      v     |  |      v     |       |      v     |  |
          |  | +--------+ |  | +--------+ |       | +--------+ |  |
          |  | |  MLP   | |  | |  MLP   | |       | |  MLP   | |  |
          |  | +--------+ |  | +--------+ |       | +--------+ |  |
          |  +------------+  +------------+       +------------+  |
          +------------------------------------------------------+
                     |
                     v
             +-----------------+
             | Final AdaLN     |<------------------- (Condition vector for Î³, Î²)
             +-----------------+
                     |
                     v
             +-----------------+
             | Linear Project  | (B, N, C*P*P)
             +-----------------+
                     |
                     v
             +-----------------+
             |  Unpatchify     | (Reshape to [B, C, H, W])
             +-----------------+
                     |
                     v
        [Output: Predicted Noise Îµ_Î¸ or Denoised z_0 (B, C, H, W)]
```

**å…³é”®ç‚¹æ€»ç»“ï¼š**

1.  **å½»åº• Transformer åŒ–ï¼š** SD3 çš„æ ¸å¿ƒæ˜¯å †å çš„ **DiT Block**ï¼Œå®Œå…¨å–ä»£äº† CNN UNetã€‚åŸºç¡€æ“ä½œæ˜¯è‡ªæ³¨æ„åŠ›å’Œ MLPã€‚
2.  **æ¡ä»¶æ³¨å…¥ï¼š** æ—¶é—´æ­¥ `t` å’Œæ–‡æœ¬æ¡ä»¶ `c_text` ä¸»è¦é€šè¿‡ **è‡ªé€‚åº”å±‚å½’ä¸€åŒ– (AdaLN æˆ– AdaLN-Zero)** è°ƒåˆ¶æ¯ä¸ª Block çš„è¡Œä¸ºã€‚**äº¤å‰æ³¨æ„åŠ› (CA)** é€šå¸¸è¢«æ˜¾å¼ç”¨äºŽæ›´ç²¾ç»†çš„æ–‡æœ¬-å›¾åƒäº¤äº’ã€‚
3.  **æ½œç©ºé—´æ“ä½œï¼š** è¾“å…¥è¾“å‡ºä»ç„¶æ˜¯ VAE ç¼–ç /è§£ç çš„æ½œå˜é‡ã€‚
4.  **Patch å¤„ç†ï¼š** ä½¿ç”¨ ViT é£Žæ ¼çš„ **Patchify/Unpatchify** å°† 2D æ½œå˜é‡è½¬æ¢ä¸º 1D token åºåˆ—ä¾› Transformer å¤„ç†ï¼Œå¤„ç†åŽå†è¿˜åŽŸã€‚
5.  **å¯æ‰©å±•æ€§ï¼š** é€šè¿‡å¢žåŠ  Block æ•° (L)ã€éšè—ç»´åº¦ (D)ã€æ³¨æ„åŠ›å¤´æ•°ç­‰å¯ä»¥å¹³æ»‘åœ°æ‰©å±•æ¨¡åž‹è§„æ¨¡ï¼Œä¸”æ€§èƒ½æå‡æ˜¾è‘—ï¼ˆScaling Lawï¼‰ã€‚
6.  **æ€§èƒ½é©±åŠ¨ï¼š** æ”¾å¼ƒ UNet çš„æ ¹æœ¬åŽŸå› æ˜¯å®žè¯è¯æ˜Ž DiT æž¶æž„åœ¨æ‰©æ•£æ¨¡åž‹ä¸­å…·æœ‰**æ›´ä¼˜è¶Šçš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§**ï¼Œå°¤å…¶åœ¨å»ºæ¨¡å…¨å±€ä¸€è‡´æ€§å’Œå¤æ‚åœºæ™¯æ–¹é¢ã€‚

Stable Diffusion 3 é‡‡ç”¨ DiT æž¶æž„æ ‡å¿—ç€æ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆæ¨¡åž‹è¿›å…¥äº†ä¸€ä¸ªæ–°çš„æ—¶ä»£ï¼Œçº¯ Transformer æž¶æž„å±•çŽ°äº†å…¶åœ¨è§†è§‰ç”Ÿæˆä»»åŠ¡ä¸­æ›¿ä»£ CNN çš„å¼ºå¤§æ½œåŠ›ï¼Œå¹¶ä¸ºæœªæ¥æ›´å¤§è§„æ¨¡ã€æ›´é«˜æ€§èƒ½çš„æ¨¡åž‹é“ºå¹³äº†é“è·¯ã€‚