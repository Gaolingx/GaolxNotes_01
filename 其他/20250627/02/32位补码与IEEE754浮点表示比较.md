# 32位补码与IEEE754浮点表示比较

### 🧑‍💻 User

设一个变量的值为 -2147483647，要求分别用 32 位补码整数和 IEEE 754 单精度浮点格式表示该变量（结果用十六进制表示），并说明哪种表示其值完全精确，哪种表示的是近似值

---

### 🤖 Assistant

### 解答
给定变量的值为 -2147483647，下面分别使用 32 位补码整数格式和 IEEE 754 单精度浮点格式表示该值，并用十六进制表示结果。同时，说明哪种表示是完全精确的，哪种表示的是近似值。

#### 1. 32 位补码整数表示
- **计算过程**：
  - 32 位补码整数的表示范围是 \([-2^{31}, 2^{31} - 1]\)，即 \([-2147483648, 2147483647]\)。给定值 \(-2147483647\) 在此范围内。
  - 绝对值：\(2147483647\)（即 \(2^{31} - 1\)）。
  - 二进制表示：\(01111111111111111111111111111111\)（32 位，最高位为 0，后跟 31 个 1）。
  - 取反（反码）：\(10000000000000000000000000000000\)。
  - 加 1（补码）：\(10000000000000000000000000000001\)。
- **十六进制表示**：
  - 将二进制 \(10000000000000000000000000000001\) 按 4 位分组：\(1000\;0000\;0000\;0000\;0000\;0000\;0000\;0001\)。
  - 转换为十六进制：\(1000 \rightarrow 8\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0001 \rightarrow 1\)。
  - 结果：**0x80000001**。

#### 2. IEEE 754 单精度浮点表示
- **格式说明**：单精度浮点使用 32 位（1 位符号位、8 位指数位、23 位尾数位），采用 IEEE 754 标准。值表示为 \((-1)^s \times (1 + f) \times 2^{e-127}\)，其中 \(s\) 是符号位，\(f\) 是尾数（小数部分），\(e\) 是存储的指数。
- **计算过程**：
  - 符号位：值为负数，所以 \(s = 1\)。
  - 绝对值：\(2147483647\)（即 \(2^{31} - 1\)）。
  - 二进制表示：\(01111111111111111111111111111111\)（32 位整数形式）。
  - 规格化：
    - 最高位的 1 位于第 30 位（从 0 开始计数），所以指数基数为 30（即 \(2^{30}\))。
    - 规格化有效数：\(1.1111111111111111111111111111111\)（31 个 1）。
  - 单精度浮点只有 24 位精度（隐含前导 1 和 23 位尾数），因此需要舍入：
    - 有效数位：隐含位后 30 位（位 29 到 0），全部为 1。
    - 存储尾数 \(f\) 取前 23 位（位 29 到 7），但剩余位（位 6 到 0，7 位）全部为 1。
    - 剩余部分值：\((2^7 - 1) \times 2^{-30} = 127 \times 2^{-30}\)。
    - 与最低有效位（LSB）的一半比较：LSB = \(2^{-23}\)，一半为 \(2^{-24} = 16 \times 2^{-30}\)。因 \(127 > 16\)，剩余部分大于 LSB 的一半。
    - IEEE 754 默认舍入模式（向最接近舍入，偶数为先）：向上舍入（因为剩余部分 > LSB 的一半）。
  - 向上舍入后：
    - 有效数变为 \(2.0\)，调整指数：指数增加 1（从 30 到 31），有效数归一化为 \(1.0\)。
    - 存储指数 \(e = 31 + 127 = 158\)（偏置指数）。
    - 尾数 \(f = 0\)（全 0）。
- **二进制表示**：
  - 符号位 \(s = 1\)。
  - 指数 \(e = 158\)，二进制：\(10011110\)（\(158 = 128 + 16 + 8 + 4 + 2 = 2^7 + 2^4 + 2^3 + 2^2 + 2^1\))。
  - 尾数 \(f = 00000000000000000000000\)（23 位）。
  - 完整二进制：\(1\;10011110\;00000000000000000000000\)。
- **十六进制表示**：
  - 按 4 位分组：\(1100\;1111\;0000\;0000\;0000\;0000\;0000\;0000\)。
    - \(1100 \rightarrow \text{C}\), \(1111 \rightarrow \text{F}\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\), \(0000 \rightarrow 0\)。
  - 结果：**0xCF000000**。
- **实际表示值**：\((-1)^1 \times 1.0 \times 2^{31} = -2147483648\)（近似于原值 \(-2147483647\)，误差为 1）。

#### 3. 精确性说明
- **32 位补码整数表示（0x80000001）**：完全精确。
  - 原因：补码整数表示直接编码整数值，无精度损失。给定值 \(-2147483647\) 在 32 位补码范围内，且表示唯一对应。
- **IEEE 754 单精度浮点表示（0xCF000000）**：近似值。
  - 原因：单精度浮点只有 24 位有效精度（包括隐含位），而 \(-2147483647\) 的绝对值 \(2147483647\) 需要 31 位二进制表示，超出浮点精度范围。浮点表示经过舍入处理，实际值为 \(-2147483648\)（最接近的可表示值），与原始值有误差。

### 最终结果
- **32 位补码整数（十六进制）**：0x80000001（精确表示）。
- **IEEE 754 单精度浮点（十六进制）**：0xCF000000（近似表示）。