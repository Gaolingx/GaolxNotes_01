# C++ string splitåŠŸèƒ½è®¾è®¡å“²å­¦è§£æ

### ğŸ§‘â€ğŸ’» User

stl stringä¸ºä»€ä¹ˆæ²¡æœ‰splitï¼Ÿ

---

### ğŸ¤– Assistant

è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯è®¸å¤šC++åˆå­¦è€…ï¼ˆå°¤å…¶æ˜¯ä»å…¶ä»–è¯­è¨€è½¬æ¥çš„ï¼‰ç»å¸¸ä¼šæ„Ÿåˆ°å›°æƒ‘çš„åœ°æ–¹ã€‚

ç®€å•ç›´æ¥çš„å›ç­”æ˜¯ï¼š**C++æ ‡å‡†å§”å‘˜ä¼šè®¤ä¸ºè¿™ä¸åº”è¯¥æ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„ã€å¿…é¡»ç”±æ ‡å‡†åº“æä¾›çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å®ç°ä¸€ä¸ªâ€œå®Œç¾â€çš„ã€æ»¡è¶³æ‰€æœ‰äººéœ€æ±‚çš„ `split` å‡½æ•°å­˜åœ¨å¾ˆå¤šè®¾è®¡ä¸Šçš„æƒè¡¡ã€‚**

ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†åˆ†æä¸€ä¸‹åŸå› ï¼š

### 1. è®¾è®¡å“²å­¦ï¼š â€œä½ ä¸ä¸ºä½ ä¸éœ€è¦çš„ä¸œè¥¿ä»˜è´¹â€
C++æ ‡å‡†åº“çš„è®¾è®¡å“²å­¦æ˜¯è¿½æ±‚é›¶å¼€é”€æŠ½è±¡å’Œé«˜æ€§èƒ½ã€‚ä¸€ä¸ªå†…ç½®çš„ `split` å‡½æ•°éœ€è¦åšå‡ºè®¸å¤šå‡è®¾ï¼Œè¿™äº›å‡è®¾å¯èƒ½ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼Œå¹¶å¯èƒ½å¯¼è‡´æ€§èƒ½æŸå¤±ã€‚

*   **è¿”å›ä»€ä¹ˆï¼Ÿ(å®¹å™¨å’Œå…ƒç´ ç±»å‹)**
    *   è¿”å› `std::vector<std::string>`ï¼Ÿè¿™ä¼šå¯¼è‡´ä¸å¿…è¦çš„å†…å­˜åˆ†é…ã€‚å¦‚æœæˆ‘åªæ˜¯æƒ³éå†åˆ†å‰²åçš„ç»“æœï¼Œæˆ–è€…æˆ‘åªéœ€è¦å‰å‡ ä¸ªéƒ¨åˆ†ï¼Œåˆ›å»ºæ•´ä¸ªå‘é‡æ˜¯æµªè´¹çš„ã€‚
    *   è¿”å› `std::vector<std::string_view>`ï¼Ÿè¿™æ›´é«˜æ•ˆï¼Œä½† `string_view` çš„ç”Ÿå‘½å‘¨æœŸä¾èµ–äºåŸå­—ç¬¦ä¸²ï¼Œå¦‚æœåŸå­—ç¬¦ä¸²è¢«ä¿®æ”¹æˆ–é”€æ¯ï¼Œä¼šå¯¼è‡´æ‚¬ç©ºå¼•ç”¨ï¼Œè¿™æ˜¯å±é™©çš„ã€‚
    *   è¿”å›ä¸€ä¸ªæƒ°æ€§æ±‚å€¼çš„**èŒƒå›´(Range)**ï¼Ÿè¿™æ˜¯ç°ä»£C++ï¼ˆC++20 Rangesï¼‰çš„æ€è·¯ï¼Œä½†å®ƒæ˜¯åœ¨ `std::string` è¯ç”Ÿå¾ˆä¹…ä¹‹åæ‰å‡ºç°çš„ã€‚

### 2. å®ç°ç»†èŠ‚çš„å¤šæ ·æ€§
ä¸€ä¸ª `split` å‡½æ•°æœ‰å¾ˆå¤šå¯é…ç½®çš„å‚æ•°ï¼Œä¸åŒçš„äººæœ‰ä¸åŒçš„éœ€æ±‚ï¼š

*   **åˆ†éš”ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ**
    *   å•ä¸ªå­—ç¬¦ï¼Ÿï¼ˆæœ€å¸¸è§ï¼‰
    *   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Ÿ
    *   ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Ÿï¼ˆåŠŸèƒ½å¼ºå¤§ä½†æ€§èƒ½æœ€å·®ï¼‰
    *   ä¸€ä¸ªè°“è¯å‡½æ•°ï¼Ÿï¼ˆä¾‹å¦‚ï¼Œ`isspace`ï¼‰
*   **æ˜¯å¦å¿½ç•¥ç©ºå­—ç¬¦ä¸²ï¼Ÿ**
    *   å¯¹äº `"a,,b,c"` ç”¨é€—å·åˆ†å‰²ï¼Œç»“æœæ˜¯ `["a", "", "b", "c"]` è¿˜æ˜¯ `["a", "b", "c"]`ï¼Ÿ
*   **åˆ†å‰²æ¬¡æ•°ï¼Ÿ**
    *   åªåˆ†å‰²å‰Næ¬¡ï¼Ÿè¿˜æ˜¯å…¨éƒ¨åˆ†å‰²ï¼Ÿ

å¦‚æœæ ‡å‡†åº“æä¾›ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒéœ€è¦åŒ…å«æ‰€æœ‰è¿™äº›é€‰é¡¹ï¼Œä¼šå¯¼è‡´ä¸€ä¸ªéå¸¸å¤æ‚å’Œç¬¨é‡çš„æ¥å£ã€‚è€Œå¦‚æœåªæä¾›ä¸€ä¸ªæœ€ç®€å•çš„ç‰ˆæœ¬ï¼Œåˆæ— æ³•æ»¡è¶³æ‰€æœ‰äººçš„éœ€æ±‚ï¼Œå¤§å®¶è¿˜æ˜¯ä¼šè‡ªå·±å†™ã€‚

### 3. è‡ªå·±å®ç°éå¸¸ç®€å•
ç”±äºC++æ ‡å‡†åº“æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼ˆå¦‚ `stringstream`, `find`, `getline`ï¼‰ï¼Œè‡ªå·±å®ç°ä¸€ä¸ªæ»¡è¶³ç‰¹å®šéœ€æ±‚çš„ `split` å‡½æ•°é€šå¸¸åªéœ€è¦å‡ è¡Œä»£ç ã€‚

**ä¾‹å¦‚ï¼Œä½¿ç”¨ `getline` å’Œ `stringstream` æŒ‰å­—ç¬¦åˆ†å‰²ï¼š**

```cpp
#include <sstream>
#include <string>
#include <vector>

std::vector<std::string> split(const std::string& s, char delimiter) {
    std::vector<std::string> tokens;
    std::string token;
    std::istringstream tokenStream(s);
    while (std::getline(tokenStream, token, delimiter)) {
        tokens.push_back(token);
    }
    return tokens;
}
```

**æ›´é«˜æ•ˆçš„æ‰‹åŠ¨æŸ¥æ‰¾ç‰ˆæœ¬ï¼š**

```cpp
#include <vector>
#include <string>

std::vector<std::string> split(const std::string& s, char delimiter) {
    std::vector<std::string> tokens;
    size_t start = 0;
    size_t end = s.find(delimiter);
    while (end != std::string::npos) {
        tokens.push_back(s.substr(start, end - start));
        start = end + 1;
        end = s.find(delimiter, start);
    }
    tokens.push_back(s.substr(start));
    return tokens;
}
```

### 4. ç°ä»£C++çš„è§£å†³æ–¹æ¡ˆ (C++20)
éšç€C++20å¼•å…¥Rangesåº“ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªæ›´ç°ä»£ã€æ›´é«˜æ•ˆçš„æ–¹å¼æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚å®ƒæä¾›äº†ä¸€ç§æƒ°æ€§æ±‚å€¼çš„æ–¹å¼ï¼Œé¿å…äº†ä¸å¿…è¦çš„å†…å­˜åˆ†é…ã€‚

**ä½¿ç”¨ `std::views::split` (C++20)ï¼š**

```cpp
#include <ranges>
#include <string>
#include <vector>

// å°†èŒƒå›´è½¬æ¢ä¸º vector<string>
auto split(const std::string& s, char delim) {
    return s
        | std::views::split(delim)
        | std::views::transform([](auto r) {
            return std::string(r.begin(), r.end());
        });
    // æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªè§†å›¾ï¼Œå¦‚æœéœ€è¦vectorï¼Œéœ€è¦å†è½¬æ¢ä¸€æ¬¡ã€‚
}

// æ›´å¸¸è§çš„ç”¨æ³•æ˜¯ç›´æ¥ä½¿ç”¨è§†å›¾è¿›è¡Œéå†
void example() {
    std::string str = "hello world c++20";
    for (auto word : str | std::views::split(' ')) {
        // word æ˜¯ä¸€ä¸ªå­èŒƒå›´ï¼Œå¯ä»¥å°†å…¶æ„é€ æˆå­—ç¬¦ä¸²
        std::string token(word.begin(), word.end());
        std::cout << token << std::endl;
    }
}
```

**ä½¿ç”¨ `std::stringstream` å’Œ `std::vector` çš„æ„é€ å‡½æ•°ï¼š**

```cpp
#include <sstream>
#include <vector>
#include <iterator>

std::string data = "one two three four";
std::istringstream iss(data);
// ç›´æ¥å°†æµä¸­çš„å†…å®¹è¯»å…¥vector
std::vector<std::string> results(
    (std::istream_iterator<std::string>(iss)),
     std::istream_iterator<std::string>()
);
```

### æ€»ç»“

`std::string` æ²¡æœ‰å†…ç½® `split` çš„ä¸»è¦åŸå› å¯ä»¥å½’ç»“ä¸ºï¼š

1.  **è®¾è®¡å“²å­¦**ï¼šé¿å…å¼ºåˆ¶ç”¨æˆ·ä¸ºä¸éœ€è¦çš„åŠŸèƒ½ä»˜å‡ºæ€§èƒ½ä»£ä»·ã€‚
2.  **æ¥å£å¤æ‚æ€§**ï¼šå¾ˆéš¾è®¾è®¡ä¸€ä¸ªèƒ½æ»¡è¶³æ‰€æœ‰ç”¨ä¾‹çš„å•ä¸€æ¥å£ã€‚
3.  **å®ç°çš„ç®€æ˜“æ€§**ï¼šç”¨ç°æœ‰çš„æ ‡å‡†åº“å·¥å…·å¯ä»¥è½»æ¾å®ç°ã€‚
4.  **å†å²åŸå› **ï¼š`std::string` å¾ˆæ—©å°±å­˜åœ¨äº†ï¼Œè€ŒåƒRangesè¿™æ ·çš„ç°ä»£è§£å†³æ–¹æ¡ˆç›´åˆ°æœ€è¿‘æ‰åŠ å…¥æ ‡å‡†ã€‚

å› æ­¤ï¼Œè™½ç„¶æ²¡æœ‰ä¸€ä¸ªåä¸º `split` çš„æˆå‘˜å‡½æ•°ï¼Œä½†C++æä¾›äº†å¤šç§åŒæ ·å¼ºå¤§ç”šè‡³æ›´çµæ´»çš„æ–¹æ³•æ¥è¾¾åˆ°ç›¸åŒçš„ç›®çš„ã€‚åœ¨ç°ä»£C++ï¼ˆC++20åŠä»¥ä¸Šï¼‰ä¸­ï¼Œ**`std::views::split`** å·²ç»è¢«å¹¿æ³›è®¤ä¸ºæ˜¯å¤„ç†è¿™ä¸ªé—®é¢˜çš„æœ€ä½³å®è·µä¹‹ä¸€ã€‚