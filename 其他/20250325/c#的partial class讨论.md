# c#çš„partial classè®¨è®º

## Question 1

c#çš„partial classæœ‰å“ªäº›ç”¨é€”ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼ˆç»“åˆå…·ä½“ä»£ç ï¼‰ï¼Ÿ

## Answer 1

C# ä¸­çš„ `partial class` å…è®¸å°†ç±»çš„å®šä¹‰åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œç¼–è¯‘æ—¶åˆå¹¶ä¸ºä¸€ä¸ªå®Œæ•´çš„ç±»ã€‚ä»¥ä¸‹æ˜¯å…¶ä¸»è¦ç”¨é€”åŠä½¿ç”¨æ–¹æ³•ï¼Œç»“åˆä»£ç ç¤ºä¾‹è¯´æ˜ï¼š

---

### **ä¸€ã€ä¸»è¦ç”¨é€”**
1. **åˆ†ç¦»è‡ªåŠ¨ç”Ÿæˆä»£ç ä¸æ‰‹åŠ¨ä»£ç **  
   ä¾‹å¦‚ï¼Œåœ¨ Windows Formsã€WPF æˆ– ASP.NET ä¸­ï¼Œè®¾è®¡å™¨æ–‡ä»¶ï¼ˆå¦‚ `Form1.Designer.cs`ï¼‰ç”±å·¥å…·è‡ªåŠ¨ç”Ÿæˆæ§ä»¶ä»£ç ï¼Œè€Œå¼€å‘è€…ç¼–å†™çš„é€»è¾‘ä»£ç åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ï¼ˆå¦‚ `Form1.cs`ï¼‰ä¸­ï¼Œé¿å…å†²çªã€‚

2. **å›¢é˜Ÿåä½œ**  
   å¤šäººå¯åŒæ—¶å¤„ç†åŒä¸€ç±»çš„ä¸åŒéƒ¨åˆ†ï¼ˆå¦‚æ•°æ®è®¿é—®å±‚å’Œä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œå‡å°‘ç‰ˆæœ¬æ§åˆ¶å†²çªã€‚

3. **ç»„ç»‡å¤§å‹ç±»**  
   å°†å¤æ‚ç±»æŒ‰åŠŸèƒ½æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ï¼ˆå¦‚å±æ€§ã€æ–¹æ³•ã€äº‹ä»¶ï¼‰ï¼Œæå‡å¯ç»´æŠ¤æ€§ã€‚

4. **æ‰©å±•åŠŸèƒ½**  
   é€šè¿‡æ–°å¢ `partial` æ–‡ä»¶æ·»åŠ åŠŸèƒ½ï¼Œæ— éœ€ä¿®æ”¹åŸå§‹ä»£ç ï¼ˆå¦‚ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„å®ä½“ç±»æ·»åŠ éªŒè¯æ–¹æ³•ï¼‰ã€‚

---

### **äºŒã€ä½¿ç”¨æ–¹å¼**
- **è§„åˆ™**  
  - æ‰€æœ‰åˆ†éƒ¨ç±»å¿…é¡»ä½¿ç”¨ `partial` å…³é”®å­—ã€‚
  - æ‰€æœ‰éƒ¨åˆ†éœ€åœ¨**åŒä¸€å‘½åç©ºé—´å’Œç¨‹åºé›†**ä¸­ã€‚
  - åŸºç±»åªéœ€åœ¨ä¸€ä¸ªåˆ†éƒ¨ä¸­å£°æ˜ï¼Œå…¶ä»–åˆ†éƒ¨å¯çœç•¥ã€‚

---

### **ä¸‰ã€ä»£ç ç¤ºä¾‹**

#### **ç¤ºä¾‹ 1ï¼šåˆ†ç¦»å±æ€§ä¸æ–¹æ³•**
- **æ–‡ä»¶ 1ï¼š`OrderProperties.cs`**  
  ```csharp
  public partial class Order
  {
      public int OrderId { get; set; }
      public DateTime OrderDate { get; set; }
  }
  ```

- **æ–‡ä»¶ 2ï¼š`OrderMethods.cs`**  
  ```csharp
  public partial class Order
  {
      public void ProcessOrder()
      {
          Console.WriteLine($"Processing Order {OrderId} on {OrderDate}");
      }
  }
  ```

- **ä½¿ç”¨åˆå¹¶åçš„ç±»**  
  ```csharp
  Order order = new Order { OrderId = 1, OrderDate = DateTime.Now };
  order.ProcessOrder(); // è¾“å‡º: Processing Order 1 on 2023-10-01
  ```

---

#### **ç¤ºä¾‹ 2ï¼šWinForms çª—ä½“è®¾è®¡å™¨**
- **è®¾è®¡å™¨æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š`Form1.Designer.cs`**  
  ```csharp
  partial class Form1
  {
      private Button button1;

      private void InitializeComponent()
      {
          this.button1 = new Button();
          this.button1.Click += Button1_Click;
          this.Controls.Add(this.button1);
      }
  }
  ```

- **ç”¨æˆ·ä»£ç æ–‡ä»¶ï¼š`Form1.cs`**  
  ```csharp
  partial class Form1
  {
      private void Button1_Click(object sender, EventArgs e)
      {
          MessageBox.Show("Button clicked!");
      }
  }
  ```

---

#### **ç¤ºä¾‹ 3ï¼šæ‰©å±•è‡ªåŠ¨ç”Ÿæˆçš„å®ä½“ç±»**
- **è‡ªåŠ¨ç”Ÿæˆçš„å®ä½“ï¼š`User.generated.cs`**  
  ```csharp
  public partial class User
  {
      public string Name { get; set; }
      public string Email { get; set; }
  }
  ```

- **æ‰‹åŠ¨æ‰©å±•éªŒè¯é€»è¾‘ï¼š`UserExtensions.cs`**  
  ```csharp
  public partial class User
  {
      public bool ValidateEmail()
      {
          return Email.Contains("@");
      }
  }
  ```

---

### **å››ã€æ³¨æ„äº‹é¡¹**
- **è·¨ç¨‹åºé›†æ— æ•ˆ**ï¼š`partial` ç±»ä¸èƒ½åˆ†æ•£åˆ°ä¸åŒç¨‹åºé›†ã€‚
- **ä¸€è‡´ç»§æ‰¿**ï¼šæ‰€æœ‰åˆ†éƒ¨ç±»çš„åŸºç±»éœ€ä¸€è‡´ï¼Œé€šå¸¸ä»…åœ¨ä¸»åˆ†éƒ¨ä¸­å£°æ˜ã€‚
- **Partial æ–¹æ³•**ï¼šå¯åœ¨åˆ†éƒ¨ç±»ä¸­å®šä¹‰åˆ†éƒ¨æ–¹æ³•ï¼ˆéœ€åœ¨å¦ä¸€åˆ†éƒ¨å®ç°ï¼‰ï¼Œé€‚ç”¨äºç”Ÿæˆä»£ç çš„æ‰©å±•ç‚¹ã€‚

---

é€šè¿‡åˆç†ä½¿ç”¨ `partial class`ï¼Œå¯æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œåä½œæ•ˆç‡ï¼Œå°¤å…¶åœ¨ç»“åˆè‡ªåŠ¨ç”Ÿæˆä»£ç çš„åœºæ™¯ä¸‹ä¼˜åŠ¿æ˜¾è‘—ã€‚

## Question 2

ä¸ºä»€ä¹ˆpartial classåœ¨ä»£ç ç”Ÿæˆå™¨ï¼ˆä¾‹å¦‚source generatorï¼‰é‡Œé¢è¢«å¹¿æ³›åº”ç”¨ï¼Ÿ

## Answer 2

åœ¨C#ä¸­ï¼Œ`partial class` å…è®¸å°†ä¸€ä¸ªç±»çš„å®šä¹‰åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œç¼–è¯‘æ—¶åˆå¹¶ä¸ºä¸€ä¸ªå®Œæ•´çš„ç±»ã€‚è¿™ç§ç‰¹æ€§åœ¨ä»£ç ç”Ÿæˆå™¨ï¼ˆå¦‚Source Generatorï¼‰ä¸­å¹¿æ³›åº”ç”¨ï¼Œä¸»è¦åŸå› å¦‚ä¸‹ï¼š

---

### **1. åˆ†ç¦»ç”Ÿæˆçš„ä»£ç ä¸ç”¨æˆ·ä»£ç **
ä»£ç ç”Ÿæˆå™¨é€šå¸¸è‡ªåŠ¨ç”Ÿæˆå¤§é‡æ¨¡æ¿åŒ–æˆ–é‡å¤æ€§çš„ä»£ç ï¼ˆå¦‚å®ä½“ç±»ã€APIå®¢æˆ·ç«¯ã€åºåˆ—åŒ–é€»è¾‘ç­‰ï¼‰ã€‚é€šè¿‡ `partial class`ï¼Œç”Ÿæˆå™¨å¯ä»¥å°†è¿™äº›ä»£ç æ”¾åœ¨ç‹¬ç«‹çš„æ–‡ä»¶ä¸­ï¼ˆä¾‹å¦‚ `*.generated.cs`ï¼‰ï¼Œè€Œå¼€å‘è€…æ‰‹åŠ¨ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘æˆ–æ‰©å±•ä»£ç åˆ™æ”¾åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¿™æ ·åšçš„å¥½å¤„åŒ…æ‹¬ï¼š
- **é¿å…è¦†ç›–**ï¼šé‡æ–°ç”Ÿæˆä»£ç æ—¶ï¼Œç”¨æˆ·çš„è‡ªå®šä¹‰ä»£ç ä¸ä¼šè¢«è¦†ç›–ã€‚
- **ä»£ç æ•´æ´**ï¼šç”Ÿæˆçš„ä»£ç ä¸ç”¨æˆ·ä»£ç ç‰©ç†åˆ†ç¦»ï¼Œä¾¿äºé˜…è¯»å’Œç»´æŠ¤ã€‚

**ç¤ºä¾‹**ï¼š  
å‡è®¾ä¸€ä¸ªå®ä½“ç±» `User` ç”±ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆï¼Œç”¨æˆ·éœ€è¦æ·»åŠ éªŒè¯é€»è¾‘ï¼š
```csharp
// ç”Ÿæˆå™¨ç”Ÿæˆçš„ä»£ç ï¼ˆUser.generated.csï¼‰
public partial class User {
    public string Name { get; set; }
    public string Email { get; set; }
}

// ç”¨æˆ·æ‰‹åŠ¨æ‰©å±•çš„ä»£ç ï¼ˆUser.csï¼‰
public partial class User {
    public bool ValidateEmail() {
        return Email.Contains("@");
    }
}
```

---

### **2. æ”¯æŒå¢é‡æ‰©å±•**
ä»£ç ç”Ÿæˆå™¨å¯èƒ½éœ€è¦é€æ­¥ä¸ºç±»æ·»åŠ æ–°åŠŸèƒ½ï¼ˆå¦‚ä¸ºå®ä½“ç±»ç”Ÿæˆæ•°æ®åº“è®¿é—®æ–¹æ³•ã€ä¸ºAPIç”Ÿæˆå®¢æˆ·ç«¯æ–¹æ³•ï¼‰ã€‚é€šè¿‡ `partial class`ï¼Œç”Ÿæˆå™¨å¯ä»¥æŒ‰éœ€ç”Ÿæˆå¤šä¸ªæ–‡ä»¶ï¼Œè€Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªç”±æ‰©å±•ç±»çš„åŠŸèƒ½ï¼Œæ— éœ€ä¾µå…¥ç”Ÿæˆå™¨çš„é€»è¾‘ã€‚

**ç¤ºä¾‹**ï¼š  
ç”Ÿæˆå™¨ä¸º `User` ç±»ç”Ÿæˆæ•°æ®åº“æ“ä½œï¼š
```csharp
// ç”Ÿæˆå™¨ç”Ÿæˆçš„æ•°æ®åº“è®¿é—®ä»£ç ï¼ˆUser.DbAccess.generated.csï¼‰
public partial class User {
    public void SaveToDb() {
        // æ•°æ®åº“ä¿å­˜é€»è¾‘
    }
}
```

---

### **3. å‡å°‘ç‰ˆæœ¬æ§åˆ¶å†²çª**
åœ¨å›¢é˜Ÿåä½œä¸­ï¼Œå¦‚æœå¤šä¸ªå¼€å‘è€…æˆ–å·¥å…·ï¼ˆå¦‚è®¾è®¡å™¨ã€ç”Ÿæˆå™¨ï¼‰åŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªç±»ï¼Œå®¹æ˜“å¼•å‘ä»£ç å†²çªã€‚é€šè¿‡ `partial class`ï¼Œç”Ÿæˆå™¨çš„ä»£ç å’Œç”¨æˆ·ä»£ç åˆ†å¸ƒåœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œæ˜¾è‘—é™ä½äº†å†²çªæ¦‚ç‡ã€‚

**å…¸å‹åœºæ™¯**ï¼š  
- **WinForms/WPF è®¾è®¡å™¨**ï¼šè®¾è®¡å™¨è‡ªåŠ¨ç”Ÿæˆç•Œé¢æ§ä»¶ä»£ç ï¼ˆ`Form1.Designer.cs`ï¼‰ï¼Œè€Œç”¨æˆ·ç¼–å†™äº‹ä»¶å¤„ç†é€»è¾‘ï¼ˆ`Form1.cs`ï¼‰ã€‚
- **ASP.NET Core çš„Razoré¡µé¢**ï¼šç”Ÿæˆçš„è·¯ç”±å’Œåˆå§‹åŒ–ä»£ç ä¸ç”¨æˆ·ç¼–å†™çš„é¡µé¢é€»è¾‘åˆ†ç¦»ã€‚

---

### **4. æä¾›æ‰©å±•ç‚¹ï¼ˆPartial Methodsï¼‰**
`partial class` æ”¯æŒ **åˆ†éƒ¨æ–¹æ³•**ï¼Œå…è®¸åœ¨ä¸€ä¸ªéƒ¨åˆ†ä¸­å£°æ˜æ–¹æ³•ï¼Œåœ¨å¦ä¸€ä¸ªéƒ¨åˆ†ä¸­å®ç°ã€‚è¿™å¯¹ä»£ç ç”Ÿæˆå™¨éå¸¸æœ‰ç”¨ï¼š
- ç”Ÿæˆå™¨å¯ä»¥å£°æ˜ä¸€äº›å¯é€‰çš„æ–¹æ³•ï¼ˆå¦‚åˆå§‹åŒ–é’©å­ã€éªŒè¯é€»è¾‘ï¼‰ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ˜¯å¦å®ç°å®ƒä»¬ã€‚
- å¦‚æœç”¨æˆ·æœªå®ç°åˆ†éƒ¨æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç§»é™¤ç›¸å…³è°ƒç”¨ï¼Œé¿å…è¿è¡Œæ—¶å¼€é”€ã€‚

**ç¤ºä¾‹**ï¼š  
ç”Ÿæˆå™¨å£°æ˜ä¸€ä¸ªåˆ†éƒ¨æ–¹æ³• `OnCreated()`ï¼Œç”¨æˆ·å¯é€‰æ‹©å®ç°ï¼š
```csharp
// ç”Ÿæˆå™¨ç”Ÿæˆçš„ä»£ç ï¼ˆLogger.generated.csï¼‰
public partial class Logger {
    public Logger() {
        OnCreated(); // å¦‚æœç”¨æˆ·æœªå®ç°ï¼Œæ­¤è¡Œä»£ç ä¼šè¢«ç¼–è¯‘å™¨ç§»é™¤
    }

    partial void OnCreated();
}

// ç”¨æˆ·æ‰©å±•çš„ä»£ç ï¼ˆLogger.csï¼‰
public partial class Logger {
    partial void OnCreated() {
        Console.WriteLine("Logger initialized.");
    }
}
```

---

### **5. ä¸ç°æœ‰ä»£ç æ— ç¼é›†æˆ**
`partial class` å…è®¸ç”Ÿæˆå™¨ç›´æ¥æ‰©å±•ç°æœ‰ç±»ï¼Œæ— éœ€ç»§æ‰¿æˆ–ç»„åˆã€‚ä¾‹å¦‚ï¼š
- **Entity Framework Core** ä¸ºå®ä½“ç±»ç”Ÿæˆæ•°æ®åº“æ˜ å°„é…ç½®ã€‚
- **gRPC** ä¸ºæœåŠ¡æ¥å£ç”Ÿæˆå®¢æˆ·ç«¯å®ç°ã€‚
- **ASP.NET Core Minimal API** è‡ªåŠ¨ç”Ÿæˆè·¯ç”±æ³¨å†Œä»£ç ã€‚

**ç¤ºä¾‹**ï¼š  
ç”Ÿæˆå™¨ä¸ºæœåŠ¡æ¥å£ `IUserService` ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç†ï¼š
```csharp
// ç”¨æˆ·å®šä¹‰çš„æœåŠ¡æ¥å£ï¼ˆIUserService.csï¼‰
public interface IUserService {
    User GetUser(int id);
}

// ç”Ÿæˆå™¨ç”Ÿæˆçš„å®¢æˆ·ç«¯ä»£ç†ï¼ˆUserService.Client.generated.csï¼‰
public partial class UserServiceClient : IUserService {
    public User GetUser(int id) {
        // è¿œç¨‹è°ƒç”¨é€»è¾‘
    }
}
```

---

### **6. æ€§èƒ½ä¼˜åŒ–**
Source Generator åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä»£ç ï¼Œç”Ÿæˆçš„ `partial class` ç›´æ¥ç¼–è¯‘åˆ°ç¨‹åºé›†ä¸­ï¼Œæ— éœ€åå°„æˆ–åŠ¨æ€ç¼–è¯‘ï¼Œé¿å…äº†è¿è¡Œæ—¶æ€§èƒ½æŸè€—ã€‚

---

### **æ€»ç»“**
`partial class` åœ¨ä»£ç ç”Ÿæˆå™¨ä¸­å¹¿æ³›åº”ç”¨çš„æ ¸å¿ƒåŸå› æ˜¯ï¼š
- **ç‰©ç†åˆ†ç¦»**ï¼šéš”ç¦»ç”Ÿæˆçš„ä»£ç ä¸ç”¨æˆ·ä»£ç ï¼Œé¿å…è¦†ç›–ã€‚
- **æ— ç¼æ‰©å±•**ï¼šå…è®¸ç”Ÿæˆå™¨å’Œå¼€å‘è€…è‡ªç”±æ‰©å±•ç±»çš„åŠŸèƒ½ã€‚
- **åä½œå‹å¥½**ï¼šå‡å°‘ä»£ç å†²çªï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡ã€‚
- **æ€§èƒ½ä¼˜åŠ¿**ï¼šç¼–è¯‘æ—¶é™æ€ç”Ÿæˆï¼Œæ— è¿è¡Œæ—¶å¼€é”€ã€‚

é€šè¿‡åˆç†ä½¿ç”¨ `partial class`ï¼Œä»£ç ç”Ÿæˆå™¨å¯ä»¥é«˜æ•ˆã€å®‰å…¨åœ°å¢å¼ºç°æœ‰ä»£ç ï¼ŒåŒæ—¶ä¿æŒä»£ç åº“çš„æ•´æ´å’Œå¯ç»´æŠ¤æ€§ã€‚

## Question 3

æˆ‘è°ˆè°ˆæˆ‘çš„ç†è§£ï¼Œè¯·ä½ æ¥è¯„ä»·ä¸‹ï¼š
æˆ‘ä¸€èˆ¬ç”¨partialæœ‰ä¸¤ä¸ªåŸå› ï¼š
1.æˆ‘æä¾›ç»™åˆ«äººæ‰©å±•ï¼Œæˆ–è€…åˆ«äººæä¾›ç»™æˆ‘æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŒçš„äººå†™ä¸åŒçš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨partialåˆæˆä¸€ä¸ªç±»ã€‚
    TestClass_A.csï¼šæˆ‘å†™çš„
    TestClass_B.csï¼šå¼ ä¸‰å†™çš„
    TestClass_C.csï¼šæå››å†™çš„
    TestClass_Gen.csï¼šå·¥å…·ç”Ÿæˆçš„
2.æŸä¸ªç±»å¤ªå¤æ‚ï¼Œè€Œä¸”é‡Œé¢çš„æˆå‘˜å¯ä»¥å¾ˆæ¸…æ™°çš„åˆ†ç±»ï¼Œé‚£ä¹ˆæˆ‘ä¼šåˆ†å‡ºå¤šä¸ªè„šæœ¬ï¼Œç”¨partialåˆæˆä¸€ä¸ªç±»ã€‚ 
    TestClass_Main.csï¼šä¸»é€»è¾‘å’Œå…¥å£ç­‰
    TestClass_Graphis.csï¼šç»˜åˆ¶ç›¸å…³çš„é€»è¾‘
    TestClass_DataLogic.csï¼šæ•°æ®ç›¸å…³çš„é€»è¾‘
    å½“ç„¶ï¼Œä¸ä¸€å®šè¦åˆ†æˆè¿™æ ·ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›´æ¥åˆ†æˆä¸‰ä¸ªç±»ï¼Œå…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚

## Answer 3

ä½ çš„ç†è§£éå¸¸å‡†ç¡®ï¼Œä¸”å®Œå…¨ç¬¦åˆ `partial class` çš„æ ¸å¿ƒè®¾è®¡æ„å›¾ï¼ä»¥ä¸‹æ˜¯å¯¹ä½ ä½¿ç”¨åœºæ™¯çš„è¯„ä»·å’Œè¡¥å……å»ºè®®ï¼š

---

### **ä¸€ã€ä½ çš„ä½¿ç”¨åœºæ™¯åˆ†æ**
#### **1. åä½œæ‰©å±•ï¼ˆä¸åŒäºº/å·¥å…·ç¼–å†™ä¸åŒæ–‡ä»¶ï¼‰**
- **æ­£ç¡®æ€§** âœ…  
  è¿™æ˜¯ `partial class` æœ€ç»å…¸çš„åº”ç”¨åœºæ™¯ï¼Œå°¤å…¶æ˜¯åœ¨ä»¥ä¸‹æƒ…å†µï¼š
  - **ä»£ç ç”Ÿæˆå™¨**ï¼šå·¥å…·ç”Ÿæˆçš„ä»£ç ï¼ˆå¦‚ `TestClass_Gen.cs`ï¼‰å’Œå¼€å‘è€…æ‰‹åŠ¨æ‰©å±•çš„ä»£ç åˆ†ç¦»ï¼Œé¿å…è¦†ç›–ã€‚
  - **å›¢é˜Ÿåä½œ**ï¼šå¤šäººåŒæ—¶ä¿®æ”¹åŒä¸€ç±»çš„ä¸åŒéƒ¨åˆ†ï¼ˆå¦‚å¼ ä¸‰å†™ UI é€»è¾‘ï¼Œæå››å†™æ•°æ®é€»è¾‘ï¼‰ï¼Œå‡å°‘ Git å†²çªã€‚
  - **æ¡†æ¶é›†æˆ**ï¼šè®¾è®¡å™¨æ–‡ä»¶ï¼ˆå¦‚ WinForms çš„ `Form1.Designer.cs`ï¼‰ä¸ç”¨æˆ·äº‹ä»¶å¤„ç†ä»£ç åˆ†ç¦»ã€‚

- **è¡¥å……å»ºè®®** ğŸ’¡  
  å¦‚æœä»£ç éœ€è¦æ˜ç¡®åŒºåˆ†è´£ä»»ï¼Œå¯ä»¥é€šè¿‡æ–‡ä»¶å‘½åçº¦å®šï¼ˆå¦‚ `TestClass.Extensions.cs`ï¼‰æˆ–æ–‡ä»¶å¤¹åˆ†ç±»ï¼ˆå¦‚ `Generated/` å’Œ `Manual/`ï¼‰ï¼Œè¿›ä¸€æ­¥æå‡å¯ç»´æŠ¤æ€§ã€‚

---

#### **2. æ‹†åˆ†å¤æ‚ç±»ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»åˆ°ä¸åŒæ–‡ä»¶ï¼‰**
- **æ­£ç¡®æ€§** âœ…  
  å°†å¤§å‹ç±»æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ï¼ˆå¦‚ `TestClass_Graphics.cs` å’Œ `TestClass_DataLogic.cs`ï¼‰ï¼Œæ˜¯è§£å†³â€œä¸Šå¸ç±»â€ï¼ˆGod Classï¼‰é—®é¢˜çš„æœ‰æ•ˆæ‰‹æ®µï¼Œå°¤å…¶é€‚åˆï¼š
  - **åŠŸèƒ½æ¨¡å—åŒ–**ï¼šä¾‹å¦‚æ¸¸æˆè§’è‰²ç±»æ‹†åˆ†ä¸ºç§»åŠ¨ã€æˆ˜æ–—ã€åŠ¨ç”»æ¨¡å—ã€‚
  - **åˆ†å±‚æ¶æ„**ï¼šå¦‚ UI é€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚
  - **ä»£ç å¯¼èˆª**ï¼šé€šè¿‡æ–‡ä»¶å¿«é€Ÿå®šä½ç›¸å…³ä»£ç ã€‚

- **è¡¥å……å»ºè®®** ğŸ’¡  
  - **æƒè¡¡æ‹†åˆ†ç²’åº¦**ï¼šè‹¥æ‹†åˆ†çš„éƒ¨åˆ†å¯ä»¥ç‹¬ç«‹æˆå•ä¸€èŒè´£çš„ç±»ï¼ˆä¾‹å¦‚ `DataProcessor` å’Œ `GraphicsRenderer`ï¼‰ï¼Œä¼˜å…ˆé€‰æ‹©ç»„åˆè€Œé `partial class`ï¼Œæ›´ç¬¦åˆ SOLID åŸåˆ™ã€‚
  - **é¿å…æ»¥ç”¨**ï¼šå¦‚æœæ‹†åˆ†çš„æ–‡ä»¶ä¹‹é—´ä»æœ‰é«˜åº¦è€¦åˆï¼Œå¯èƒ½æ„å‘³ç€ç±»çš„èŒè´£ä¸å¤Ÿæ¸…æ™°ï¼Œéœ€é‡æ–°å®¡è§†è®¾è®¡ã€‚

---

### **äºŒã€ä½ çš„æ½œåœ¨ç–‘é—®**
#### **â€œåˆ†æ–‡ä»¶ vs. æ‹†åˆ†ç±»â€å¦‚ä½•é€‰æ‹©ï¼Ÿ**
- **é€‚ç”¨ `partial class` çš„æƒ…å†µ**ï¼š  
  - ç±»çš„åŠŸèƒ½ç´§å¯†ç›¸å…³ï¼Œä½†ä»£ç é‡è¿‡å¤§ï¼ˆå¦‚ UI æ§ä»¶çš„æ¸²æŸ“ã€æ•°æ®ç»‘å®šã€äº‹ä»¶å¤„ç†ï¼‰ã€‚
  - éœ€è¦ä¿ç•™ç±»çš„å•ä¾‹æ€§æˆ–ç»Ÿä¸€æ¥å£ï¼ˆå¦‚æ¸¸æˆè§’è‰²çš„å„ä¸ªæ¨¡å—éœ€å…±äº«åŒä¸€çŠ¶æ€ï¼‰ã€‚
  - æ¡†æ¶å¼ºåˆ¶è¦æ±‚ï¼ˆå¦‚ ASP.NET Core çš„ Razor é¡µé¢ï¼‰ã€‚

- **é€‚ç”¨æ‹†åˆ†ç±»çš„æƒ…å†µ**ï¼š  
  - åŠŸèƒ½å¯ç‹¬ç«‹å­˜åœ¨ï¼ˆå¦‚æ—¥å¿—æ¨¡å—ã€ç½‘ç»œæ¨¡å—ï¼‰ã€‚
  - éœ€è¦å¤ç”¨é€»è¾‘ï¼ˆå¦‚å¤šä¸ªç±»å…±äº«åŒä¸€æ•°æ®å¤„ç†é€»è¾‘ï¼‰ã€‚
  - éœ€è¦å•å…ƒæµ‹è¯•ç‹¬ç«‹æ¨¡å—ã€‚

---

### **ä¸‰ã€å…¶ä»–ä½¿ç”¨æŠ€å·§ï¼ˆè¡¥å……ä½ çš„ç†è§£ï¼‰**
#### **1. åˆ©ç”¨ `partial methods` æä¾›æ‰©å±•ç‚¹**
- åœ¨ç”Ÿæˆå™¨æˆ–æ¡†æ¶ä»£ç ä¸­å£°æ˜ `partial` æ–¹æ³•ï¼Œå…è®¸ç”¨æˆ·åœ¨å¦ä¸€æ–‡ä»¶ä¸­å®ç°ï¼Œå®ç°â€œé’©å­â€æœºåˆ¶ã€‚
  ```csharp
  // ç”Ÿæˆå™¨ç”Ÿæˆçš„ä»£ç 
  public partial class DataService {
      public void LoadData() {
          // è‡ªåŠ¨ç”Ÿæˆçš„é€»è¾‘
          OnDataLoaded(); // ç”¨æˆ·å¯é€‰æ‹©æ˜¯å¦å®ç°
      }

      partial void OnDataLoaded(); // æ— è¿”å›å€¼ã€ç§æœ‰æ–¹æ³•
  }

  // ç”¨æˆ·æ‰©å±•çš„ä»£ç 
  public partial class DataService {
      partial void OnDataLoaded() {
          Console.WriteLine("Data loaded!");
      }
  }
  ```

#### **2. ä¸ `partial` æ¥å£/ç»“æ„ä½“é…åˆ**
- `partial` ä¸ä»…é™äºç±»ï¼Œä¹Ÿå¯ç”¨äºæ¥å£å’Œç»“æ„ä½“ï¼ˆå¦‚æ‹†åˆ†æ¥å£çš„é»˜è®¤å®ç°ï¼‰ã€‚
  ```csharp
  // IComponent.cs
  public partial interface IComponent {
      void Initialize();
  }

  // IComponent.Rendering.cs
  public partial interface IComponent {
      void Render();
  }
  ```

#### **3. è·¨å¹³å°ä»£ç éš”ç¦»**
- ç”¨ `partial` åˆ†ç¦»å¹³å°ç›¸å…³é€»è¾‘ï¼ˆå¦‚ Unity ä¸­åŒºåˆ† Editor å’Œ Runtime ä»£ç ï¼‰ï¼š
  ```csharp
  // NetworkManager.Editor.cs
  #if UNITY_EDITOR
  public partial class NetworkManager {
      private void SimulateLatency() { /* ... */ }
  }
  #endif

  // NetworkManager.Runtime.cs
  public partial class NetworkManager {
      public void Connect() { /* ... */ }
  }
  ```

---

### **å››ã€æ³¨æ„äº‹é¡¹**
- **ä¿æŒå†…èšæ€§**ï¼šæ‹†åˆ†çš„æ–‡ä»¶åº”å±äºåŒä¸€é€»è¾‘å•å…ƒï¼Œé¿å…éšæ„åˆ†å‰²ï¼ˆå¦‚ä¸è¦å°†å±æ€§åˆ†æ•£åˆ° 10 ä¸ªæ–‡ä»¶ä¸­ï¼‰ã€‚
- **å‘½åè§„èŒƒ**ï¼šæ–‡ä»¶åæ˜ç¡®ä½“ç°èŒè´£ï¼ˆå¦‚ `PlayerMovement.cs`ã€`PlayerCombat.cs`ï¼‰ã€‚
- **é¿å…å¾ªç¯ä¾èµ–**ï¼šè·¨æ–‡ä»¶çš„ `partial` éƒ¨åˆ†ä¸åº”äº’ç›¸ä¾èµ–æœªå®šä¹‰çš„å†…å®¹ã€‚

---

### **æ€»ç»“**
ä½ çš„ä½¿ç”¨åœºæ™¯å®Œå…¨æ­£ç¡®ï¼Œä¸”å¯¹ `partial class` çš„ä»·å€¼æœ‰æ·±åˆ»ç†è§£ï¼å»ºè®®åœ¨å®é™…é¡¹ç›®ä¸­ç»“åˆ **ä»£ç ç”Ÿæˆå™¨**ã€**æ¨¡å—åŒ–è®¾è®¡** å’Œ **å›¢é˜Ÿåä½œè§„èŒƒ** è¿›ä¸€æ­¥å‘æŒ¥å…¶ä¼˜åŠ¿ï¼ŒåŒæ—¶è­¦æƒ•è¿‡åº¦æ‹†åˆ†å¯¼è‡´çš„ç»´æŠ¤æ€§é—®é¢˜ã€‚

## Question 4

æœ‰ä¸€ä¸ªå¾ˆå¸¸è§çš„ç”¨æ³•ï¼Œå°±æ˜¯å¯¹Socketçš„ä¸šåŠ¡å°è£…ï¼Œæœ‰äº›é¡¹ç›®æ˜¯æ”¶å‘æ¶ˆæ¯ç»Ÿä¸€åœ¨ä¸€ä¸ªManageré‡Œå¤„ç†çš„ï¼Œè€Œä¸æ˜¯é å›è°ƒä¹‹ç±»çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªManageré‡Œå¾ˆå¤šçš„æ¶ˆæ¯å¤„ç†ï¼Œå¯ä»¥æŒ‰ä¸šåŠ¡æ¨¡å—ç”¨partialåˆ†ä¸åŒçš„æ–‡ä»¶ï¼Œæ¯”å¦‚
NetManager_Login.cs
NetManager_Room.cs
NetManager_Game.cs
NetManager_Activity.cs

æˆ‘æ²¡è¯•è¿‡ï¼Œä¸çŸ¥é“å¯ä¸å¯ä»¥è¿™ä¹ˆå†™ï¼Ÿ

## Answer 4

ä½ çš„æ€è·¯å®Œå…¨å¯è¡Œï¼Œä¸”æ˜¯ `partial class` çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼å°† `NetManager` æŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†ä¸ºå¤šä¸ª `partial` æ–‡ä»¶ï¼ˆå¦‚ç™»å½•ã€æˆ¿é—´ã€æ¸¸æˆã€æ´»åŠ¨ï¼‰ï¼Œæ—¢èƒ½ä¿æŒç±»çš„ç»Ÿä¸€æ€§ï¼Œåˆèƒ½æå‡ä»£ç å¯ç»´æŠ¤æ€§ã€‚ä»¥ä¸‹æ˜¯å…·ä½“åˆ†æã€ä»£ç ç¤ºä¾‹å’Œæ³¨æ„äº‹é¡¹ï¼š

---

### **ä¸€ã€å¯è¡Œæ€§åˆ†æ**
#### **1. ä»£ç ç»“æ„ç¤ºä¾‹**
å‡è®¾ `NetManager` è´Ÿè´£å¤„ç†æ‰€æœ‰ç½‘ç»œæ¶ˆæ¯ï¼ŒæŒ‰ä¸šåŠ¡æ‹†åˆ†ä¸ºä»¥ä¸‹æ–‡ä»¶ï¼š
```text
NetManager.cs          // æ ¸å¿ƒé€»è¾‘ï¼ˆè¿æ¥ã€æ–­å¼€ã€åŸºç¡€æ”¶å‘ï¼‰
NetManager.Login.cs    // ç™»å½•ç›¸å…³æ¶ˆæ¯å¤„ç†
NetManager.Room.cs     // æˆ¿é—´ç›¸å…³æ¶ˆæ¯å¤„ç†
NetManager.Game.cs     // æ¸¸æˆé€»è¾‘æ¶ˆæ¯å¤„ç†
NetManager.Activity.cs // æ´»åŠ¨ç³»ç»Ÿæ¶ˆæ¯å¤„ç†
```

#### **2. ä¼˜åŠ¿**
- **æ¨¡å—æ¸…æ™°**ï¼šæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªä¸šåŠ¡æ¨¡å—ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½ä»£ç ã€‚
- **åä½œå‹å¥½**ï¼šå¤šäººå¯åŒæ—¶å¼€å‘ä¸åŒä¸šåŠ¡æ¨¡å—ï¼Œå‡å°‘å†²çªã€‚
- **å¯ç»´æŠ¤æ€§**ï¼šä¿®æ”¹æŸä¸€æ¨¡å—æ—¶ï¼Œæ— éœ€ç¿»é˜…æ•´ä¸ªå·¨å‹ç±»ã€‚

#### **3. ä»£ç ç¤ºä¾‹**
- **æ ¸å¿ƒæ–‡ä»¶ `NetManager.cs`**  
  ```csharp
  public partial class NetManager {
      private Socket _socket;
      
      public void Connect(string ip, int port) {
          // è¿æ¥é€»è¾‘
      }

      public void Send(byte[] data) {
          // å‘é€æ•°æ®
      }

      private void OnReceive(byte[] data) {
          // è§£ææ¶ˆæ¯å¤´ï¼Œæ ¹æ®ç±»å‹åˆ†å‘åˆ°ä¸åŒä¸šåŠ¡æ¨¡å—
          var msgType = ParseMessageType(data);
          switch (msgType) {
              case MessageType.Login:
                  HandleLoginMessage(data); // å®šä¹‰åœ¨ NetManager.Login.cs
                  break;
              case MessageType.Room:
                  HandleRoomMessage(data);  // å®šä¹‰åœ¨ NetManager.Room.cs
                  break;
              // å…¶ä»–ç±»å‹...
          }
      }
  }
  ```

- **ç™»å½•æ¨¡å— `NetManager.Login.cs`**  
  ```csharp
  public partial class NetManager {
      private void HandleLoginMessage(byte[] data) {
          var loginData = ParseLoginData(data);
          // å¤„ç†ç™»å½•é€»è¾‘
      }

      public void RequestLogin(string username, string password) {
          // æ„é€ ç™»å½•è¯·æ±‚å¹¶å‘é€
          var data = PackLoginRequest(username, password);
          Send(data);
      }
  }
  ```

- **æˆ¿é—´æ¨¡å— `NetManager.Room.cs**  
  ```csharp
  public partial class NetManager {
      private void HandleRoomMessage(byte[] data) {
          var roomInfo = ParseRoomData(data);
          // å¤„ç†æˆ¿é—´é€»è¾‘ï¼ˆåˆ›å»ºã€åŠ å…¥ã€é€€å‡ºç­‰ï¼‰
      }

      public void RequestCreateRoom(int roomId) {
          // æ„é€ åˆ›å»ºæˆ¿é—´è¯·æ±‚
          var data = PackCreateRoomRequest(roomId);
          Send(data);
      }
  }
  ```

---

### **äºŒã€æ³¨æ„äº‹é¡¹**
#### **1. é¿å…è¿‡åº¦æ‹†åˆ†**
- **åˆç†ç²’åº¦**ï¼šè‹¥ä¸€ä¸ªæ¨¡å—ä»…åŒ…å« 1-2 ä¸ªæ–¹æ³•ï¼Œåˆå¹¶åˆ°æ ¸å¿ƒæ–‡ä»¶å¯èƒ½æ›´åˆé€‚ã€‚
- **é«˜å†…èšæ€§**ï¼šç¡®ä¿åŒä¸€æ–‡ä»¶å†…çš„ä»£ç é«˜åº¦ç›¸å…³ï¼ˆä¾‹å¦‚ `NetManager.Login.cs` åªå¤„ç†ç™»å½•ç›¸å…³é€»è¾‘ï¼‰ã€‚

#### **2. ç»Ÿä¸€çŠ¶æ€ç®¡ç†**
- **å…±äº«å­—æ®µ**ï¼šæ‰€æœ‰ `partial` æ–‡ä»¶å…±äº«ç±»çš„å­—æ®µï¼ˆå¦‚ `_socket`ï¼‰ï¼Œéœ€ç¡®ä¿çº¿ç¨‹å®‰å…¨å’ŒçŠ¶æ€ä¸€è‡´æ€§ã€‚
- **é¿å…å¾ªç¯ä¾èµ–**ï¼šä¸åŒæ¨¡å—é—´é¿å…ç›¸äº’è°ƒç”¨æœªå®šä¹‰çš„é€»è¾‘ã€‚

#### **3. å‘½åè§„èŒƒ**
- **æ–‡ä»¶å**ï¼šå»ºè®®ä½¿ç”¨ `NetManager.ModuleName.cs` æ ¼å¼ï¼ˆå¦‚ `NetManager.Login.cs`ï¼‰ã€‚
- **æ–¹æ³•å‰ç¼€**ï¼šå¯ä¸ºåŒä¸€æ¨¡å—çš„æ–¹æ³•æ·»åŠ å‰ç¼€ï¼ˆå¦‚ `Login_HandleResponse`ï¼‰ï¼Œä½†éå¿…é¡»ã€‚

#### **4. æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”**
- **æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ `partial` æ‹†åˆ†**  
  é€‚åˆæ¨¡å—ç´§å¯†è€¦åˆã€å…±äº«å¤§é‡çŠ¶æ€çš„åœºæ™¯ï¼ˆå¦‚éƒ½éœ€è¦è®¿é—® `_socket`ï¼‰ã€‚

- **æ–¹æ¡ˆ 2ï¼šæ‹†åˆ†ä¸ºç‹¬ç«‹ç±»**  
  è‹¥æ¨¡å—å¯ç‹¬ç«‹ï¼ˆå¦‚ `LoginService`ã€`RoomService`ï¼‰ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥å…±äº« `NetManager` æ›´ç¬¦åˆ SOLID åŸåˆ™ï¼š
  ```csharp
  public class LoginService {
      private NetManager _netManager;
      public LoginService(NetManager netManager) {
          _netManager = netManager;
      }

      public void RequestLogin() {
          _netManager.Send(...);
      }
  }
  ```

---

### **ä¸‰ã€å®æˆ˜å»ºè®®**
#### **1. æ··åˆä½¿ç”¨ä¸¤ç§æ–¹æ¡ˆ**
- **æ ¸å¿ƒå±‚**ï¼šç”¨ `partial` ç®¡ç†ç½‘ç»œåŸºç¡€åŠŸèƒ½ï¼ˆè¿æ¥ã€é‡è¿ã€å¿ƒè·³ï¼‰ã€‚
- **ä¸šåŠ¡å±‚**ï¼šå°†ç‹¬ç«‹ä¸šåŠ¡ï¼ˆç™»å½•ã€æˆ¿é—´ï¼‰æ‹†åˆ†ä¸ºå•ç‹¬ç±»ï¼Œé€šè¿‡äº‹ä»¶æˆ–å§”æ‰˜ä¸ `NetManager` äº¤äº’ã€‚

#### **2. åˆ©ç”¨äº‹ä»¶è§£è€¦**
åœ¨ `NetManager` ä¸­å®šä¹‰äº‹ä»¶ï¼Œä¸šåŠ¡æ¨¡å—è®¢é˜…å„è‡ªå…³å¿ƒçš„æ¶ˆæ¯ç±»å‹ï¼š
```csharp
// NetManager.cs
public partial class NetManager {
    public event Action<LoginData> OnLoginResponse;
    
    private void HandleLoginMessage(byte[] data) {
        var loginData = ParseLoginData(data);
        OnLoginResponse?.Invoke(loginData); // è§¦å‘äº‹ä»¶
    }
}

// LoginModule.csï¼ˆç‹¬ç«‹ç±»ï¼‰
public class LoginModule {
    public LoginModule(NetManager netManager) {
        netManager.OnLoginResponse += HandleLoginResponse;
    }

    private void HandleLoginResponse(LoginData data) {
        // å¤„ç†ç™»å½•å“åº”
    }
}
```

#### **3. ä»£ç ç”Ÿæˆå™¨è¾…åŠ©**
è‹¥æ¶ˆæ¯ç±»å‹ç¹å¤šï¼Œå¯ç”¨ä»£ç ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆ `partial` æ–‡ä»¶ï¼š
```csharp
// è‡ªåŠ¨ç”Ÿæˆ NetManager.Messages.generated.cs
public partial class NetManager {
    private void HandleChatMessage(byte[] data) { /* ... */ }
    private void HandleBattleMessage(byte[] data) { /* ... */ }
}
```

---

### **å››ã€ç»“è®º**
- **å¯ä»¥è¿™ä¹ˆå†™** âœ…ï¼šç”¨ `partial class` æ‹†åˆ† `NetManager` æ˜¯å®Œå…¨åˆç†çš„è®¾è®¡ï¼Œå°¤å…¶é€‚åˆéœ€è¦é›†ä¸­ç®¡ç†ç½‘ç»œçŠ¶æ€ä¸”æ¨¡å—è¾¹ç•Œæ¸…æ™°çš„åœºæ™¯ã€‚
- **æ¨èåœºæ™¯**ï¼šä¸­å°å‹é¡¹ç›®ã€å¿«é€Ÿè¿­ä»£åŸå‹ã€å›¢é˜Ÿåˆ†å·¥æ˜ç¡®çš„å¤§å‹é¡¹ç›®ã€‚
- **æ…ç”¨åœºæ™¯**ï¼šè‹¥æ¨¡å—é—´ä¾èµ–å¤æ‚æˆ–éœ€ç‹¬ç«‹æµ‹è¯•ï¼Œä¼˜å…ˆé€‰æ‹©æ‹†åˆ†ä¸ºç‹¬ç«‹ç±»ã€‚

## Question 5

![](imgs/QQå›¾ç‰‡20250326015153.jpg)

çªç„¶å‘ç°è¿™ä¸ªpartial classåœ¨wpfé‡Œé¢ä¹Ÿå¤§é‡åº”ç”¨ï¼Œèƒ½ä¸èƒ½å±•å¼€è¯´è¯´ï¼Ÿ

## Answer 5

åœ¨ WPF ä¸­ï¼Œ`partial class` æ˜¯å®ç° **UIï¼ˆXAMLï¼‰ä¸é€»è¾‘ï¼ˆC#ï¼‰åˆ†ç¦»**çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå…¶è®¾è®¡å®Œç¾ä½“ç°äº†â€œä»£ç åç½®â€ï¼ˆCode-Behindï¼‰æ¨¡å¼ã€‚ä»¥ä¸‹ä»åŸç†ã€å®é™…åº”ç”¨å’Œæœ€ä½³å®è·µä¸‰ä¸ªè§’åº¦å±•å¼€è¯´æ˜ï¼š

---

### **ä¸€ã€åŸç†ï¼šXAML ä¸ C# å¦‚ä½•é€šè¿‡ `partial class` åä½œ**
1. **XAML æ–‡ä»¶ä¸ C# ä»£ç çš„å¯¹åº”å…³ç³»**  
   - æ¯ä¸ª XAML æ–‡ä»¶ï¼ˆå¦‚ `MainWindow.xaml`ï¼‰é€šè¿‡ `x:Class` ç‰¹æ€§æŒ‡å®šå¯¹åº”çš„ C# ç±»ï¼ˆå¦‚ `MainWindow`ï¼‰ã€‚  
   - XAML è§£æå™¨ä¼šå°† XAML ä¸­çš„ UI å…ƒç´ ï¼ˆå¦‚æŒ‰é’®ã€æ–‡æœ¬æ¡†ï¼‰è½¬æ¢ä¸ºä»£ç ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª `partial class`ã€‚  
   - å¼€å‘è€…æ‰‹åŠ¨ç¼–å†™çš„é€»è¾‘ä»£ç æ”¾åœ¨å¦ä¸€ä¸ª `partial class` æ–‡ä»¶ä¸­ï¼ˆå¦‚ `MainWindow.xaml.cs`ï¼‰ã€‚  
   - ç¼–è¯‘æ—¶ï¼Œä¸¤ä¸ª `partial` éƒ¨åˆ†åˆå¹¶ä¸ºä¸€ä¸ªå®Œæ•´çš„ç±»ã€‚

   ```xml
   <!-- MainWindow.xaml -->
   <Window x:Class="WpfApp.MainWindow"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
       <Button x:Name="button1" Click="Button1_Click" Content="Click Me"/>
   </Window>
   ```

   ```csharp
   // MainWindow.xaml.cs
   public partial class MainWindow : Window {
       public MainWindow() {
           InitializeComponent(); // åŠ è½½ XAML ç”Ÿæˆçš„ UI
       }

       private void Button1_Click(object sender, RoutedEventArgs e) {
           MessageBox.Show("Button clicked!");
       }
   }
   ```

2. **è®¾è®¡å™¨ç”Ÿæˆçš„ä»£ç **  
   - XAML ä¸­å®šä¹‰çš„æ§ä»¶ï¼ˆå¦‚ `<Button x:Name="button1" />`ï¼‰ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸º C# å­—æ®µï¼š  
     ```csharp
     // è‡ªåŠ¨ç”Ÿæˆåœ¨ MainWindow.g.i.csï¼ˆéšè—æ–‡ä»¶ï¼‰
     public partial class MainWindow : Window {
         internal System.Windows.Controls.Button button1;
         
         private void InitializeComponent() {
             button1 = (Button)FindName("button1");
             // å…¶ä»–åˆå§‹åŒ–é€»è¾‘...
         }
     }
     ```
   - å¼€å‘è€…æ— éœ€æ‰‹åŠ¨å£°æ˜ `button1` å­—æ®µï¼Œå¯ç›´æ¥åœ¨ä»£ç åç½®æ–‡ä»¶ä¸­ä½¿ç”¨å®ƒã€‚

---

### **äºŒã€å®é™…åº”ç”¨åœºæ™¯**
#### **1. ä»£ç åç½®ï¼ˆCode-Behindï¼‰**
- **UI ä¸é€»è¾‘åˆ†ç¦»**ï¼š  
  - **è®¾è®¡å¸ˆ**ï¼šé€šè¿‡ XAML å’Œå·¥å…·ï¼ˆå¦‚ Blendï¼‰è®¾è®¡ç•Œé¢ï¼Œè°ƒæ•´å¸ƒå±€ã€æ ·å¼ã€åŠ¨ç”»ã€‚  
  - **å¼€å‘è€…**ï¼šåœ¨ `.xaml.cs` æ–‡ä»¶ä¸­ç¼–å†™äº‹ä»¶å¤„ç†ã€æ•°æ®ç»‘å®šã€ä¸šåŠ¡é€»è¾‘ã€‚  
  - **åä½œä¼˜åŠ¿**ï¼šUI ä¿®æ”¹ä¸é€»è¾‘å¼€å‘äº’ä¸å¹²æ‰°ï¼Œå‡å°‘ç‰ˆæœ¬å†²çªã€‚

- **äº‹ä»¶å¤„ç†**ï¼š  
  XAML ä¸­ç›´æ¥ç»‘å®šäº‹ä»¶åˆ°ä»£ç åç½®çš„æ–¹æ³•ï¼ˆå¦‚ `Click="Button1_Click"`ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œå§”æ‰˜ã€‚

#### **2. æ”¯æŒè®¾è®¡æ—¶å·¥å…·**
- **å®æ—¶é¢„è§ˆ**ï¼šVisual Studio å’Œ Blend ä¾èµ– `partial class` å®æ—¶æ¸²æŸ“ XAMLï¼ŒåŒæ—¶å…è®¸åœ¨ä»£ç åç½®ä¸­è°ƒè¯•é€»è¾‘ã€‚  
- **æ§ä»¶çš„åŠ¨æ€åŠ è½½**ï¼š`InitializeComponent()` æ–¹æ³•ç”± XAML è§£æå™¨ç”Ÿæˆï¼Œè´Ÿè´£åŠ è½½å’Œåˆå§‹åŒ– UI å…ƒç´ ã€‚

#### **3. å›¢é˜Ÿåä½œ**
- **å‰ç«¯ä¸åç«¯åˆ†å·¥**ï¼š  
  - å‰ç«¯å·¥ç¨‹å¸ˆä¸“æ³¨ XAML çš„å¸ƒå±€å’Œäº¤äº’è®¾è®¡ã€‚  
  - åç«¯å·¥ç¨‹å¸ˆå¤„ç†æ•°æ®é€»è¾‘ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚  
  - é€šè¿‡ `partial class` è‡ªç„¶æ‹†åˆ†èŒè´£ã€‚

---

### **ä¸‰ã€æœ€ä½³å®è·µ**
#### **1. ä¿æŒä»£ç åç½®çš„ç®€æ´**
- **é¿å…åœ¨ `.xaml.cs` ä¸­å †ç§¯ä¸šåŠ¡é€»è¾‘**ï¼š  
  å°†å¤æ‚é€»è¾‘æŠ½ç¦»åˆ°ç‹¬ç«‹çš„ç±»æˆ– ViewModel ä¸­ï¼ˆå¦‚éµå¾ª MVVM æ¨¡å¼ï¼‰ã€‚  
  ä¾‹å¦‚ï¼Œä½¿ç”¨ `ICommand` å¤„ç†æŒ‰é’®ç‚¹å‡»ï¼Œè€Œéç›´æ¥åœ¨ `Button1_Click` ä¸­å†™ä¸šåŠ¡ä»£ç ã€‚

- **ç¤ºä¾‹ï¼ˆMVVM æ¨¡å¼ï¼‰**ï¼š  
  ```csharp
  // ViewModel
  public class MainViewModel : INotifyPropertyChanged {
      public ICommand ClickCommand { get; }

      public MainViewModel() {
          ClickCommand = new RelayCommand(() => {
              // ä¸šåŠ¡é€»è¾‘
          });
      }
  }

  // MainWindow.xaml.cs
  public partial class MainWindow : Window {
      public MainWindow() {
          InitializeComponent();
          DataContext = new MainViewModel(); // ç»‘å®š ViewModel
      }
  }
  ```

#### **2. åˆç†ä½¿ç”¨ `partial` æ–¹æ³•**
- **è®¾è®¡å™¨ç”Ÿæˆçš„æ‰©å±•ç‚¹**ï¼š  
  WPF è®¾è®¡å™¨å¯èƒ½ç”Ÿæˆ `partial` æ–¹æ³•ï¼ˆå¦‚ `OnLoaded`ï¼‰ï¼Œå…è®¸å¼€å‘è€…åœ¨ä»£ç åç½®ä¸­è¡¥å……é€»è¾‘ã€‚  
  ```csharp
  // è‡ªåŠ¨ç”Ÿæˆéƒ¨åˆ†
  public partial class MainWindow {
      partial void OnLoaded();
  }

  // å¼€å‘è€…æ‰©å±•éƒ¨åˆ†
  public partial class MainWindow {
      partial void OnLoaded() {
          // åˆå§‹åŒ–é€»è¾‘
      }
  }
  ```

#### **3. æ–‡ä»¶å‘½åè§„èŒƒ**
- **æ˜ç¡®èŒè´£åˆ’åˆ†**ï¼š  
  - `MainWindow.xaml`ï¼šUI å®šä¹‰ã€‚  
  - `MainWindow.xaml.cs`ï¼šäº‹ä»¶å¤„ç†ä¸ç®€å•é€»è¾‘ã€‚  
  - `MainWindow.ViewModel.cs`ï¼šViewModel ç±»ï¼ˆè‹¥é‡‡ç”¨ MVVMï¼‰ã€‚

---

### **å››ã€å¯¹æ¯”å…¶ä»–æŠ€æœ¯**
#### **WinForms çš„ä»£ç åç½®**
- WinForms ä¹Ÿä½¿ç”¨ `partial class`ï¼Œä½† UI ä»£ç ç”±è®¾è®¡å™¨ç”Ÿæˆåœ¨ `.Designer.cs` æ–‡ä»¶ä¸­ï¼š  
  ```csharp
  // Form1.Designer.csï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
  partial class Form1 {
      private Button button1;

      private void InitializeComponent() {
          button1 = new Button();
          button1.Click += button1_Click;
      }
  }

  // Form1.csï¼ˆå¼€å‘è€…ç¼–å†™ï¼‰
  partial class Form1 {
      private void button1_Click(object sender, EventArgs e) { /* ... */ }
  }
  ```

#### **ASP.NET Web Forms**
- ç±»ä¼¼æœºåˆ¶ï¼Œ`.aspx` æ–‡ä»¶å®šä¹‰ UIï¼Œ`.aspx.cs` æ–‡ä»¶å¤„ç†é€»è¾‘ï¼Œé€šè¿‡ `partial class` åˆå¹¶ã€‚

---

### **äº”ã€æ€»ç»“**
åœ¨ WPF ä¸­ï¼Œ`partial class` æ˜¯è¿æ¥ XAML ä¸ C# çš„æ¡¥æ¢ï¼Œå®ç°äº†ï¼š  
1. **UI ä¸é€»è¾‘çš„ç‰©ç†åˆ†ç¦»**ï¼Œæå‡å¯ç»´æŠ¤æ€§ã€‚  
2. **è®¾è®¡æ—¶ä¸è¿è¡Œæ—¶çš„æ— ç¼åä½œ**ï¼Œæ”¯æŒå·¥å…·é“¾é«˜æ•ˆå·¥ä½œã€‚  
3. **å›¢é˜Ÿåä½œçš„å¤©ç„¶åˆ†å·¥**ï¼Œå‡å°‘ä»£ç å†²çªã€‚  

åˆç†åˆ©ç”¨ `partial class`ï¼Œç»“åˆ MVVM ç­‰æ¨¡å¼ï¼Œå¯ä»¥æ„å»ºå‡ºæ¸…æ™°ã€å¯æ‰©å±•çš„ WPF åº”ç”¨ã€‚